(function(e){function t(t){for(var r,u,o=t[0],c=t[1],s=t[2],f=0,h=[];f<o.length;f++)u=o[f],Object.prototype.hasOwnProperty.call(a,u)&&a[u]&&h.push(a[u][0]),a[u]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(h.length)h.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(r=!1)}r&&(i.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},a={app:0},i=[];function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/doodle-frontend/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var s=0;s<o.length;s++)t(o[s]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"065c":function(e,t,n){},"07a2":function(e,t,n){"use strict";n("5ecd")},1:function(e,t){},"12c7":function(e,t,n){"use strict";n("3351")},2395:function(e,t,n){},"23a7":function(e,t,n){},3351:function(e,t,n){},"346a":function(e,t,n){"use strict";n("7e65")},"452f":function(e,t,n){},"45c1":function(e,t,n){"use strict";
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var r=n("970b").default,a=n("5bc3").default,i=n("3c96").default,u=n("ed6d").default,o=n("2d0d").default,c=n("7037").default;n("a4d3"),n("e01a"),n("d3b7"),n("5cc6"),n("907a"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("d9e2"),n("c19f"),n("8172"),n("efec"),n("cb29"),n("fb6a"),n("99af"),n("25f0"),n("498a"),n("ac1f"),n("5319"),n("caad"),n("2532"),n("a9e3"),n("bf19"),n("a874"),n("b0c0"),n("8ba4"),n("1276");var s=n("1fb5"),l=n("9152"),f="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;t.Buffer=v,t.SlowBuffer=x,t.INSPECT_MAX_BYTES=50;var h=2147483647;function p(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(n){return!1}}function b(e){if(e>h)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,v.prototype),t}function v(e,t,n){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return O(e)}return d(e,t,n)}function d(e,t,n){if("string"===typeof e)return m(e,t);if(ArrayBuffer.isView(e))return j(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+c(e));if(he(e,ArrayBuffer)||e&&he(e.buffer,ArrayBuffer))return k(e,t,n);if("undefined"!==typeof SharedArrayBuffer&&(he(e,SharedArrayBuffer)||e&&he(e.buffer,SharedArrayBuffer)))return k(e,t,n);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return v.from(r,t,n);var a=B(e);if(a)return a;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return v.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+c(e))}function y(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function g(e,t,n){return y(e),e<=0?b(e):void 0!==t?"string"===typeof n?b(e).fill(t,n):b(e).fill(t):b(e)}function O(e){return y(e),b(e<0?0:0|I(e))}function m(e,t){if("string"===typeof t&&""!==t||(t="utf8"),!v.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|S(e,t),r=b(n),a=r.write(e,t);return a!==n&&(r=r.slice(0,a)),r}function w(e){for(var t=e.length<0?0:0|I(e.length),n=b(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function j(e){if(he(e,Uint8Array)){var t=new Uint8Array(e);return k(t.buffer,t.byteOffset,t.byteLength)}return w(e)}function k(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,v.prototype),r}function B(e){if(v.isBuffer(e)){var t=0|I(e.length),n=b(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!==typeof e.length||pe(e.length)?b(0):w(e):"Buffer"===e.type&&Array.isArray(e.data)?w(e.data):void 0}function I(e){if(e>=h)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h.toString(16)+" bytes");return 0|e}function x(e){return+e!=e&&(e=0),v.alloc(+e)}function S(e,t){if(v.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||he(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+c(e));var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var a=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return oe(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return le(e).length;default:if(a)return r?-1:oe(e).length;t=(""+t).toLowerCase(),a=!0}}function E(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";e||(e="utf8");while(1)switch(e){case"hex":return F(this,t,n);case"utf8":case"utf-8":return D(this,t,n);case"ascii":return W(this,t,n);case"latin1":case"binary":return K(this,t,n);case"base64":return P(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function C(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function R(e,t,n,r,a){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,pe(n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"===typeof t&&(t=v.from(t,r)),v.isBuffer(t))return 0===t.length?-1:A(e,t,n,r,a);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):A(e,[t],n,r,a);throw new TypeError("val must be string, number or Buffer")}function A(e,t,n,r,a){var i,u=1,o=e.length,c=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;u=2,o/=2,c/=2,n/=2}function s(e,t){return 1===u?e[t]:e.readUInt16BE(t*u)}if(a){var l=-1;for(i=n;i<o;i++)if(s(e,i)===s(t,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===c)return l*u}else-1!==l&&(i-=i-l),l=-1}else for(n+c>o&&(n=o-c),i=n;i>=0;i--){for(var f=!0,h=0;h<c;h++)if(s(e,i+h)!==s(t,h)){f=!1;break}if(f)return i}return-1}function U(e,t,n,r){n=Number(n)||0;var a=e.length-n;r?(r=Number(r),r>a&&(r=a)):r=a;var i,u=t.length;for(r>u/2&&(r=u/2),i=0;i<r;++i){var o=parseInt(t.substr(2*i,2),16);if(pe(o))return i;e[n+i]=o}return i}function T(e,t,n,r){return fe(oe(t,e.length-n),e,n,r)}function L(e,t,n,r){return fe(ce(t),e,n,r)}function N(e,t,n,r){return fe(le(t),e,n,r)}function _(e,t,n,r){return fe(se(t,e.length-n),e,n,r)}function P(e,t,n){return 0===t&&n===e.length?s.fromByteArray(e):s.fromByteArray(e.slice(t,n))}function D(e,t,n){n=Math.min(e.length,n);var r=[],a=t;while(a<n){var i=e[a],u=null,o=i>239?4:i>223?3:i>191?2:1;if(a+o<=n){var c=void 0,s=void 0,l=void 0,f=void 0;switch(o){case 1:i<128&&(u=i);break;case 2:c=e[a+1],128===(192&c)&&(f=(31&i)<<6|63&c,f>127&&(u=f));break;case 3:c=e[a+1],s=e[a+2],128===(192&c)&&128===(192&s)&&(f=(15&i)<<12|(63&c)<<6|63&s,f>2047&&(f<55296||f>57343)&&(u=f));break;case 4:c=e[a+1],s=e[a+2],l=e[a+3],128===(192&c)&&128===(192&s)&&128===(192&l)&&(f=(15&i)<<18|(63&c)<<12|(63&s)<<6|63&l,f>65535&&f<1114112&&(u=f))}}null===u?(u=65533,o=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),a+=o}return H(r)}t.kMaxLength=h,v.TYPED_ARRAY_SUPPORT=p(),v.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(v.prototype,"parent",{enumerable:!0,get:function(){if(v.isBuffer(this))return this.buffer}}),Object.defineProperty(v.prototype,"offset",{enumerable:!0,get:function(){if(v.isBuffer(this))return this.byteOffset}}),v.poolSize=8192,v.from=function(e,t,n){return d(e,t,n)},Object.setPrototypeOf(v.prototype,Uint8Array.prototype),Object.setPrototypeOf(v,Uint8Array),v.alloc=function(e,t,n){return g(e,t,n)},v.allocUnsafe=function(e){return O(e)},v.allocUnsafeSlow=function(e){return O(e)},v.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==v.prototype},v.compare=function(e,t){if(he(e,Uint8Array)&&(e=v.from(e,e.offset,e.byteLength)),he(t,Uint8Array)&&(t=v.from(t,t.offset,t.byteLength)),!v.isBuffer(e)||!v.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,a=0,i=Math.min(n,r);a<i;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0},v.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},v.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return v.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=v.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var i=e[n];if(he(i,Uint8Array))a+i.length>r.length?(v.isBuffer(i)||(i=v.from(i.buffer,i.byteOffset,i.byteLength)),i.copy(r,a)):Uint8Array.prototype.set.call(r,i,a);else{if(!v.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,a)}a+=i.length}return r},v.byteLength=S,v.prototype._isBuffer=!0,v.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)C(this,t,t+1);return this},v.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)C(this,t,t+3),C(this,t+1,t+2);return this},v.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)C(this,t,t+7),C(this,t+1,t+6),C(this,t+2,t+5),C(this,t+3,t+4);return this},v.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?D(this,0,e):E.apply(this,arguments)},v.prototype.toLocaleString=v.prototype.toString,v.prototype.equals=function(e){if(!v.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===v.compare(this,e)},v.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},f&&(v.prototype[f]=v.prototype.inspect),v.prototype.compare=function(e,t,n,r,a){if(he(e,Uint8Array)&&(e=v.from(e,e.offset,e.byteLength)),!v.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+c(e));if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),t<0||n>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&t>=n)return 0;if(r>=a)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,a>>>=0,this===e)return 0;for(var i=a-r,u=n-t,o=Math.min(i,u),s=this.slice(r,a),l=e.slice(t,n),f=0;f<o;++f)if(s[f]!==l[f]){i=s[f],u=l[f];break}return i<u?-1:u<i?1:0},v.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},v.prototype.indexOf=function(e,t,n){return R(this,e,t,n,!0)},v.prototype.lastIndexOf=function(e,t,n){return R(this,e,t,n,!1)},v.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return U(this,e,t,n);case"utf8":case"utf-8":return T(this,e,t,n);case"ascii":case"latin1":case"binary":return L(this,e,t,n);case"base64":return N(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},v.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var M=4096;function H(e){var t=e.length;if(t<=M)return String.fromCharCode.apply(String,e);var n="",r=0;while(r<t)n+=String.fromCharCode.apply(String,e.slice(r,r+=M));return n}function W(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(127&e[a]);return r}function K(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(e[a]);return r}function F(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var a="",i=t;i<n;++i)a+=be[e[i]];return a}function q(e,t,n){for(var r=e.slice(t,n),a="",i=0;i<r.length-1;i+=2)a+=String.fromCharCode(r[i]+256*r[i+1]);return a}function z(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function G(e,t,n,r,a,i){if(!v.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function V(e,t,n,r,a){ne(t,r,a,e,n,7);var i=Number(t&BigInt(4294967295));e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i;var u=Number(t>>(BigInt(32)&BigInt(4294967295)));return e[n++]=u,u>>=8,e[n++]=u,u>>=8,e[n++]=u,u>>=8,e[n++]=u,n}function J(e,t,n,r,a){ne(t,r,a,e,n,7);var i=Number(t&BigInt(4294967295));e[n+7]=i,i>>=8,e[n+6]=i,i>>=8,e[n+5]=i,i>>=8,e[n+4]=i;var u=Number(t>>(BigInt(32)&BigInt(4294967295)));return e[n+3]=u,u>>=8,e[n+2]=u,u>>=8,e[n+1]=u,u>>=8,e[n]=u,n+8}function $(e,t,n,r,a,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Y(e,t,n,r,a){return t=+t,n>>>=0,a||$(e,t,n,4,34028234663852886e22,-34028234663852886e22),l.write(e,t,n,r,23,4),n+4}function Z(e,t,n,r,a){return t=+t,n>>>=0,a||$(e,t,n,8,17976931348623157e292,-17976931348623157e292),l.write(e,t,n,r,52,8),n+8}v.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,v.prototype),r},v.prototype.readUintLE=v.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);var r=this[e],a=1,i=0;while(++i<t&&(a*=256))r+=this[e+i]*a;return r},v.prototype.readUintBE=v.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);var r=this[e+--t],a=1;while(t>0&&(a*=256))r+=this[e+--t]*a;return r},v.prototype.readUint8=v.prototype.readUInt8=function(e,t){return e>>>=0,t||z(e,1,this.length),this[e]},v.prototype.readUint16LE=v.prototype.readUInt16LE=function(e,t){return e>>>=0,t||z(e,2,this.length),this[e]|this[e+1]<<8},v.prototype.readUint16BE=v.prototype.readUInt16BE=function(e,t){return e>>>=0,t||z(e,2,this.length),this[e]<<8|this[e+1]},v.prototype.readUint32LE=v.prototype.readUInt32LE=function(e,t){return e>>>=0,t||z(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},v.prototype.readUint32BE=v.prototype.readUInt32BE=function(e,t){return e>>>=0,t||z(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},v.prototype.readBigUInt64LE=ve((function(e){e>>>=0,re(e,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||ae(e,this.length-8);var r=t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24),a=this[++e]+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+n*Math.pow(2,24);return BigInt(r)+(BigInt(a)<<BigInt(32))})),v.prototype.readBigUInt64BE=ve((function(e){e>>>=0,re(e,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||ae(e,this.length-8);var r=t*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e],a=this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n;return(BigInt(r)<<BigInt(32))+BigInt(a)})),v.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);var r=this[e],a=1,i=0;while(++i<t&&(a*=256))r+=this[e+i]*a;return a*=128,r>=a&&(r-=Math.pow(2,8*t)),r},v.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);var r=t,a=1,i=this[e+--r];while(r>0&&(a*=256))i+=this[e+--r]*a;return a*=128,i>=a&&(i-=Math.pow(2,8*t)),i},v.prototype.readInt8=function(e,t){return e>>>=0,t||z(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},v.prototype.readInt16LE=function(e,t){e>>>=0,t||z(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},v.prototype.readInt16BE=function(e,t){e>>>=0,t||z(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},v.prototype.readInt32LE=function(e,t){return e>>>=0,t||z(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},v.prototype.readInt32BE=function(e,t){return e>>>=0,t||z(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},v.prototype.readBigInt64LE=ve((function(e){e>>>=0,re(e,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||ae(e,this.length-8);var r=this[e+4]+this[e+5]*Math.pow(2,8)+this[e+6]*Math.pow(2,16)+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24))})),v.prototype.readBigInt64BE=ve((function(e){e>>>=0,re(e,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||ae(e,this.length-8);var r=(t<<24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n)})),v.prototype.readFloatLE=function(e,t){return e>>>=0,t||z(e,4,this.length),l.read(this,e,!0,23,4)},v.prototype.readFloatBE=function(e,t){return e>>>=0,t||z(e,4,this.length),l.read(this,e,!1,23,4)},v.prototype.readDoubleLE=function(e,t){return e>>>=0,t||z(e,8,this.length),l.read(this,e,!0,52,8)},v.prototype.readDoubleBE=function(e,t){return e>>>=0,t||z(e,8,this.length),l.read(this,e,!1,52,8)},v.prototype.writeUintLE=v.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){var a=Math.pow(2,8*n)-1;G(this,e,t,n,a,0)}var i=1,u=0;this[t]=255&e;while(++u<n&&(i*=256))this[t+u]=e/i&255;return t+n},v.prototype.writeUintBE=v.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){var a=Math.pow(2,8*n)-1;G(this,e,t,n,a,0)}var i=n-1,u=1;this[t+i]=255&e;while(--i>=0&&(u*=256))this[t+i]=e/u&255;return t+n},v.prototype.writeUint8=v.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||G(this,e,t,1,255,0),this[t]=255&e,t+1},v.prototype.writeUint16LE=v.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||G(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},v.prototype.writeUint16BE=v.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||G(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},v.prototype.writeUint32LE=v.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||G(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},v.prototype.writeUint32BE=v.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||G(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},v.prototype.writeBigUInt64LE=ve((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return V(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),v.prototype.writeBigUInt64BE=ve((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return J(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),v.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var a=Math.pow(2,8*n-1);G(this,e,t,n,a-1,-a)}var i=0,u=1,o=0;this[t]=255&e;while(++i<n&&(u*=256))e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/u>>0)-o&255;return t+n},v.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var a=Math.pow(2,8*n-1);G(this,e,t,n,a-1,-a)}var i=n-1,u=1,o=0;this[t+i]=255&e;while(--i>=0&&(u*=256))e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/u>>0)-o&255;return t+n},v.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||G(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},v.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||G(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},v.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||G(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},v.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||G(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},v.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||G(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},v.prototype.writeBigInt64LE=ve((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return V(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),v.prototype.writeBigInt64BE=ve((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return J(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),v.prototype.writeFloatLE=function(e,t,n){return Y(this,e,t,!0,n)},v.prototype.writeFloatBE=function(e,t,n){return Y(this,e,t,!1,n)},v.prototype.writeDoubleLE=function(e,t,n){return Z(this,e,t,!0,n)},v.prototype.writeDoubleBE=function(e,t,n){return Z(this,e,t,!1,n)},v.prototype.copy=function(e,t,n,r){if(!v.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var a=r-n;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),a},v.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!v.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var a=e.charCodeAt(0);("utf8"===r&&a<128||"latin1"===r)&&(e=a)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(i=t;i<n;++i)this[i]=e;else{var u=v.isBuffer(e)?e:v.from(e,r),o=u.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=u[i%o]}return this};var X={};function Q(e,t,n){X[e]=function(n){u(s,n);var c=o(s);function s(){var n;return r(this,s),n=c.call(this),Object.defineProperty(i(n),"message",{value:t.apply(i(n),arguments),writable:!0,configurable:!0}),n.name="".concat(n.name," [").concat(e,"]"),n.stack,delete n.name,n}return a(s,[{key:"code",get:function(){return e},set:function(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}]),s}(n)}function ee(e){for(var t="",n=e.length,r="-"===e[0]?1:0;n>=r+4;n-=3)t="_".concat(e.slice(n-3,n)).concat(t);return"".concat(e.slice(0,n)).concat(t)}function te(e,t,n){re(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||ae(t,e.length-(n+1))}function ne(e,t,n,r,a,i){if(e>n||e<t){var u,o="bigint"===typeof t?"n":"";throw u=i>3?0===t||t===BigInt(0)?">= 0".concat(o," and < 2").concat(o," ** ").concat(8*(i+1)).concat(o):">= -(2".concat(o," ** ").concat(8*(i+1)-1).concat(o,") and < 2 ** ")+"".concat(8*(i+1)-1).concat(o):">= ".concat(t).concat(o," and <= ").concat(n).concat(o),new X.ERR_OUT_OF_RANGE("value",u,e)}te(r,a,i)}function re(e,t){if("number"!==typeof e)throw new X.ERR_INVALID_ARG_TYPE(t,"number",e)}function ae(e,t,n){if(Math.floor(e)!==e)throw re(e,n),new X.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new X.ERR_BUFFER_OUT_OF_BOUNDS;throw new X.ERR_OUT_OF_RANGE(n||"offset",">= ".concat(n?1:0," and <= ").concat(t),e)}Q("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),Q("ERR_INVALID_ARG_TYPE",(function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(c(t))}),TypeError),Q("ERR_OUT_OF_RANGE",(function(e,t,n){var r='The value of "'.concat(e,'" is out of range.'),a=n;return Number.isInteger(n)&&Math.abs(n)>Math.pow(2,32)?a=ee(String(n)):"bigint"===typeof n&&(a=String(n),(n>Math.pow(BigInt(2),BigInt(32))||n<-Math.pow(BigInt(2),BigInt(32)))&&(a=ee(a)),a+="n"),r+=" It must be ".concat(t,". Received ").concat(a),r}),RangeError);var ie=/[^+/0-9A-Za-z-_]/g;function ue(e){if(e=e.split("=")[0],e=e.trim().replace(ie,""),e.length<2)return"";while(e.length%4!==0)e+="=";return e}function oe(e,t){var n;t=t||1/0;for(var r=e.length,a=null,i=[],u=0;u<r;++u){if(n=e.charCodeAt(u),n>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(u+1===r){(t-=3)>-1&&i.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(t-=3)>-1&&i.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function ce(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function se(e,t){for(var n,r,a,i=[],u=0;u<e.length;++u){if((t-=2)<0)break;n=e.charCodeAt(u),r=n>>8,a=n%256,i.push(a),i.push(r)}return i}function le(e){return s.toByteArray(ue(e))}function fe(e,t,n,r){var a;for(a=0;a<r;++a){if(a+n>=t.length||a>=e.length)break;t[a+n]=e[a]}return a}function he(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function pe(e){return e!==e}var be=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,a=0;a<16;++a)t[r+a]=e[n]+e[a];return t}();function ve(e){return"undefined"===typeof BigInt?de:e}function de(){throw new Error("BigInt not supported")}},"5ecd":function(e,t,n){},"6f14":function(e,t,n){"use strict";n("e3e2")},"79e7":function(e,t,n){"use strict";n("452f")},"7a9b":function(e,t,n){"use strict";n("23a7")},"7c55":function(e,t,n){"use strict";n("2395")},"7e65":function(e,t,n){},"943d":function(e,t,n){"use strict";n("a5dc")},"97b2":function(e,t,n){},"9c2b":function(e){e.exports=JSON.parse('{"seed":null,"waspWebSocketUrl":"wss://wasp.shawkyz.info/chain/%chainId/ws","waspApiUrl":"https://wasp.shawkyz.info","goShimmerApiUrl":"https://goshimmer.shawkyz.info"}')},a503:function(e,t,n){"use strict";n("97b2")},a5dc:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Game",{nativeOn:{contextmenu:function(e){return function(e){e.preventDefault()}.apply(null,arguments)}}})],1)},i=[],u=n("d4ec"),o=n("bee2"),c=n("257e"),s=n("262e"),l=n("2caf"),f=n("ade3"),h=(n("99af"),n("9ab4")),p=(n("98db"),n("1b40")),b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.doodle.initialized?n("div",{staticClass:"bg"},[e.currentTableNumber>0?n("div",{attrs:{id:"game"}},[n("Table",{attrs:{tableNumber:e.currentTableNumber,doodle:e.doodle}}),n("ButtonGroup",{staticClass:"left"},[n("Button",{staticClass:"purple",attrs:{isPressable:!e.requestingFunds&&0==e.userData.l2Balance},on:{"button-pressed":e.requestFunds}},[e.requestingFunds?n("div",[e._v("Requesting...")]):-1==e.userData.l2Balance?n("div",[e._v("Loading...")]):0==e.userData.l2Balance?n("div",[e._v("Request play IOTA")]):n("div",[e._v("L2 Balance: "+e._s(e.userData.l2Balance)+" IOTA")])])],1),e.userData.l2Balance>0?n("ButtonGroup",{staticClass:"right"},[n("Button",{staticClass:"red",attrs:{isPressable:!e.requestingFunds},on:{"button-pressed":e.leaveTable}},[e._v("Leave table")]),n("Button",{staticClass:"green",attrs:{isPressable:!e.requestingFunds},on:{"button-pressed":e.joinNextHand}},[e._v("Join next hand")]),n("Button",{staticClass:"green",attrs:{isPressable:!e.requestingFunds},on:{"button-pressed":e.joinNextBigBlind}},[e._v("Join next big blind")])],1):e._e()],1):e._e()]):e._e()},v=[],d=n("1da1"),y=(n("96cf"),n("d9e2"),n("2c28")),g=n("3835"),O=(n("d3b7"),n("3ca3"),n("ddb0"),n("d81d"),n("45eb")),m=n("7e84"),w=n("b85c"),j=(n("4ec9"),n("25f0"),n("4e82"),n("a15b"),n("b64b"),n("45c1")),k=function(){function e(){Object(u["a"])(this,e)}return Object(o["a"])(e,null,[{key:"encode",value:function(t){if(!t||0==t.length)return"";var n,r,a=0,i=[0];while(a<t.length){n=0;while(n<i.length)i[n]<<=8,n++;i[0]+=t[a],r=0,n=0;while(n<i.length)i[n]+=r,r=i[n]/58|0,i[n]%=58,++n;while(r)i.push(r%58),r=r/58|0;a++}a=0;while(0==t[a]&&a<t.length-1)i.push(0),a++;return i.reverse().map((function(t){return e.ALPHABET[t]})).join("")}},{key:"decode",value:function(t){if(!t||0==t.length)return j["Buffer"].from("");e.buildMap();var n=[0],r=0;while(r<t.length){var a=t[r];if(!(a in e.ALPHABET_MAP))throw new Error("Character '".concat(a,"' is not in the Base58 alphabet."));var i=0;while(i<n.length)n[i]*=58,i++;n[0]+=e.ALPHABET_MAP[a];var u=0;i=0;while(i<n.length)n[i]+=u,u=n[i]>>8,n[i]&=255,++i;while(u)n.push(255&u),u>>=8;r++}r=0;while("1"==t[r]&&r<t.length-1)n.push(0),r++;return j["Buffer"].from(n.reverse())}},{key:"isValid",value:function(t){if(!t)return!1;e.buildMap();var n,r=Object(w["a"])(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(!(a in e.ALPHABET_MAP))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}},{key:"concat",value:function(t,n){var r=e.decode(t),a=e.decode(n),i=j["Buffer"].alloc(r.length+a.length);return i.set(r,0),i.set(a,r.length),e.encode(i)}},{key:"buildMap",value:function(){if(0==Object.keys(e.ALPHABET_MAP).length){var t=0;while(t<e.ALPHABET.length)e.ALPHABET_MAP[e.ALPHABET.charAt(t)]=t,t++}}}]),e}();Object(f["a"])(k,"ALPHABET","123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),Object(f["a"])(k,"ALPHABET_MAP",{});var B=n("58a4"),I=n.n(B),x=n("c8f6"),S=function(){function e(){Object(u["a"])(this,e)}return Object(o["a"])(e,null,[{key:"from",value:function(e){return Object(x["blake2b"])(e,void 0,32)}}]),e}(),E=(n("fb2c"),n("907a"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),function(){function e(){Object(u["a"])(this,e)}return Object(o["a"])(e,null,[{key:"generate",value:function(){var t=window.crypto,n=new Uint32Array(e.SEED_SIZE);return t.getRandomValues(n),j["Buffer"].from(n)}},{key:"subseed",value:function(t,n){var r=j["Buffer"].alloc(8);r.writeBigUInt64LE(BigInt(n),0);var a=j["Buffer"].alloc(this.SEED_SIZE),i=S.from(r);return e.xorBytes(t,j["Buffer"].from(i),a),a}},{key:"isValid",value:function(t){return!!t&&(!!k.isValid(t)&&k.decode(t).length==e.SEED_SIZE)}},{key:"generateKeyPair",value:function(t,n){var r=e.subseed(t,n);return U.keyPairFromSeed(r)}},{key:"generateAddress",value:function(t,n){var r=e.generateKeyPair(t,n),a=r.publicKey;return A(a)}},{key:"xorBytes",value:function(e,t,n){for(var r=0;r<e.byteLength;r++)n.writeUInt8(e.readUInt8(r)^t.readUInt8(r),r)}}]),e}());function C(e){var t=R(e),n=k.decode(t),r=j["Buffer"].alloc(4),a=j["Buffer"].concat([n,r]),i=k.encode(a);return i}function R(e){var t=j["Buffer"].from(e.publicKey);return A(t)}function A(e){var t=S.from(e),n=j["Buffer"].alloc(E.SEED_SIZE+1);return n[0]=U.VERSION,j["Buffer"].from(t).copy(n,1),k.encode(n)}Object(f["a"])(E,"SEED_SIZE",32);var U=function(){function e(){Object(u["a"])(this,e)}return Object(o["a"])(e,null,[{key:"keyPairFromSeed",value:function(e){var t=I.a.sign.keyPair.fromSeed(e);return{publicKey:j["Buffer"].from(t.publicKey),secretKey:j["Buffer"].from(t.secretKey)}}},{key:"privateSign",value:function(e,t){return j["Buffer"].from(I.a.sign.detached(t,e.secretKey))}}]),e}();Object(f["a"])(U,"VERSION",0),Object(f["a"])(U,"PUBLIC_KEY_SIZE",32),Object(f["a"])(U,"SIGNATURE_SIZE",64);var T=function(){function e(){Object(u["a"])(this,e)}return Object(o["a"])(e,[{key:"fromBase58",value:function(e,t){var n=k.decode(e);return n.length!=we[t]&&je("invalid byte size"),n}},{key:"fromAddress",value:function(e){return this.fromBase58(e,oe)}},{key:"fromAgentID",value:function(e){return this.fromBase58(e,ce)}},{key:"fromBool",value:function(e){var t=j["Buffer"].alloc(1);return e&&t.writeUInt8(1,0),t}},{key:"fromBytes",value:function(e){return e}},{key:"fromChainID",value:function(e){return this.fromBase58(e,fe)}},{key:"fromColor",value:function(e){return"IOTA"==e&&(e="11111111111111111111111111111111"),this.fromBase58(e,he)}},{key:"fromHash",value:function(e){return this.fromBase58(e,pe)}},{key:"fromHname",value:function(e){return this.fromUint32(e)}},{key:"fromInt8",value:function(e){var t=j["Buffer"].alloc(1);return t.writeInt8(e,0),t}},{key:"fromInt16",value:function(e){var t=j["Buffer"].alloc(2);return t.writeInt16LE(e,0),t}},{key:"fromInt32",value:function(e){var t=j["Buffer"].alloc(4);return t.writeInt32LE(e,0),t}},{key:"fromInt64",value:function(e){var t=j["Buffer"].alloc(8);return t.writeBigInt64LE(e,0),t}},{key:"fromRequestID",value:function(e){return this.fromBase58(e,Oe)}},{key:"fromString",value:function(e){return j["Buffer"].from(e)}},{key:"fromUint8",value:function(e){var t=j["Buffer"].alloc(1);return t.writeUInt8(e,0),t}},{key:"fromUint16",value:function(e){var t=j["Buffer"].alloc(2);return t.writeUInt16LE(e,0),t}},{key:"fromUint32",value:function(e){var t=j["Buffer"].alloc(4);return t.writeUInt32LE(e,0),t}},{key:"fromUint64",value:function(e){var t=j["Buffer"].alloc(8);return t.writeBigUInt64LE(e,0),t}}]),e}(),L=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;Object(u["a"])(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(f["a"])(Object(c["a"])(e),"args",new Map),e}return Object(o["a"])(n,[{key:"set",value:function(e,t){this.args.set(e,t)}},{key:"indexedKey",value:function(e,t){return e+"."+t.toString()}},{key:"mandatory",value:function(e){this.args.has(e)||je("missing mandatory "+e)}},{key:"encode",value:function(){var e,t=new Array,n=Object(w["a"])(this.args.keys());try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r)}}catch(h){n.e(h)}finally{n.f()}t.sort((function(e,t){return e.localeCompare(t)}));var a=j["Buffer"].alloc(4);a.writeUInt32LE(t.length,0);for(var i=0,u=t;i<u.length;i++){var o=u[i],c=j["Buffer"].from("-"+o),s=j["Buffer"].alloc(2);s.writeUInt16LE(c.length,0);var l=this.args.get(o);if(!l)throw new Error("Arguments.encode: missing value");var f=j["Buffer"].alloc(4);f.writeUInt32LE(l.length,0),a=j["Buffer"].concat([a,s,c,f,l])}return a}},{key:"encodeCall",value:function(){var e,t=new Ce,n=Object(w["a"])(this.args);try{for(n.s();!(e=n.n()).done;){var r=Object(g["a"])(e.value,2),a=r[0],i=r[1],u=j["Buffer"].from(a).toString("base64"),o=i.toString("base64");t.Items.push(new Ee(u,o))}}catch(c){n.e(c)}finally{n.f()}return t}}]),n}(T),N=function(){function e(t){Object(u["a"])(this,e),Object(f["a"])(this,"svc",void 0),Object(f["a"])(this,"keyPair",null),Object(f["a"])(this,"onLedger",!1),Object(f["a"])(this,"xfer",new ue),this.svc=t}return Object(o["a"])(e,[{key:"onLedgerRequest",value:function(e){this.onLedger=e}},{key:"post",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n||(n=new L),this.keyPair||(this.keyPair=this.svc.keyPair),this.keyPair){e.next=4;break}throw new Error("Key pair not defined");case 4:return e.next=6,this.svc.postRequest(t,n,this.xfer,this.keyPair,this.onLedger);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"sign",value:function(e){this.keyPair=e}},{key:"transfer",value:function(e){this.xfer=e}}]),e}(),_=function(){function e(t){Object(u["a"])(this,e),Object(f["a"])(this,"svc",void 0),this.svc=t}return Object(o["a"])(e,[{key:"callView",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return null==n&&(n=new L),e.next=3,this.svc.callView(t,n,r);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()}]),e}(),P=function(){function e(){Object(u["a"])(this,e)}return Object(o["a"])(e,[{key:"toAddress",value:function(t){return e.toBase58(t,oe)}},{key:"toAgentID",value:function(t){return e.toBase58(t,ce)}},{key:"toBytes",value:function(t){return e.checkDefault(t,le)}},{key:"toBool",value:function(t){return 0!=e.checkDefault(t,se)[0]}},{key:"toChainID",value:function(t){return e.toBase58(t,fe)}},{key:"toColor",value:function(t){var n=e.toBase58(t,he);return"11111111111111111111111111111111"==n&&(n="IOTA"),n}},{key:"toHash",value:function(t){return e.toBase58(t,pe)}},{key:"toHname",value:function(t){return e.checkDefault(t,be).readUInt32LE(0)}},{key:"toInt8",value:function(t){return e.checkDefault(t,ve).readInt8(0)}},{key:"toInt16",value:function(t){return e.checkDefault(t,de).readInt16LE(0)}},{key:"toInt32",value:function(t){return e.checkDefault(t,ye).readInt32LE(0)}},{key:"toInt64",value:function(t){return e.checkDefault(t,ge).readBigInt64LE(0)}},{key:"toRequestID",value:function(t){return e.toBase58(t,Oe)}},{key:"toString",value:function(t){return e.checkDefault(t,me).toString()}},{key:"toUint8",value:function(t){return e.checkDefault(t,ve).readUInt8(0)}},{key:"toUint16",value:function(t){return e.checkDefault(t,de).readUInt16LE(0)}},{key:"toUint32",value:function(t){return e.checkDefault(t,ye).readUInt32LE(0)}},{key:"toUint64",value:function(t){return e.checkDefault(t,ge).readBigUInt64LE(0)}}],[{key:"checkDefault",value:function(e,t){var n=we[t];return void 0===e?j["Buffer"].alloc(n):(0!=n&&e.length!=n&&je("invalid type size"),e)}},{key:"toBase58",value:function(t,n){return k.encode(e.checkDefault(t,n))}}]),e}(),D=(n("a9e3"),function(){function e(t){Object(u["a"])(this,e),Object(f["a"])(this,"index",0),Object(f["a"])(this,"msg",void 0),Object(f["a"])(this,"timestamp",void 0),this.msg=t,this.timestamp=Number(this.next())}return Object(o["a"])(e,[{key:"next",value:function(){var e;return null!==(e=this.msg[this.index++])&&void 0!==e?e:""}},{key:"nextAddress",value:function(){return this.next()}},{key:"nextAgentID",value:function(){return this.next()}},{key:"nextBool",value:function(){return"0"!=this.next()}},{key:"nextBytes",value:function(){return k.decode(this.next())}},{key:"nextChainID",value:function(){return this.next()}},{key:"nextColor",value:function(){return this.next()}},{key:"nextHash",value:function(){return this.next()}},{key:"nextHname",value:function(){return Number(this.next())}},{key:"nextInt8",value:function(){return Number(this.next())}},{key:"nextInt16",value:function(){return Number(this.next())}},{key:"nextInt32",value:function(){return Number(this.next())}},{key:"nextInt64",value:function(){return BigInt(this.next())}},{key:"nextRequestID",value:function(){return this.next()}},{key:"nextString",value:function(){return this.next()}},{key:"nextUint8",value:function(){return Number(this.next())}},{key:"nextUint16",value:function(){return Number(this.next())}},{key:"nextUint32",value:function(){return Number(this.next())}},{key:"nextUint64",value:function(){return BigInt(this.next())}}]),e}()),M=(n("159b"),function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;Object(u["a"])(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(f["a"])(Object(c["a"])(e),"keys",new Map),Object(f["a"])(Object(c["a"])(e),"res",new Map),e}return Object(o["a"])(n,[{key:"exists",value:function(e){return this.res.has(e)}},{key:"forEach",value:function(e){var t=this;this.res.forEach((function(n,r){var a=t.keys.get(r);void 0!==a?e(a,n):je("missing key")}))}},{key:"get",value:function(e){return this.res.get(e)}},{key:"set",value:function(e,t){var n=e.toString();this.keys.set(n,e),this.res.set(n,t)}}]),n}(P)),H=(n("4de4"),n("2ca0"),n("ac1f"),n("5319"),n("1276"),n("fb6a"),Object(o["a"])((function e(){Object(u["a"])(this,e)})));Object(f["a"])(H,"IOTA_COLOR","IOTA"),Object(f["a"])(H,"IOTA_COLOR_STRING","11111111111111111111111111111111"),Object(f["a"])(H,"IOTA_COLOR_BYTES",j["Buffer"].alloc(32));var W=function(){function e(t,n){Object(u["a"])(this,e),Object(f["a"])(this,"serviceClient",void 0),Object(f["a"])(this,"webSocket",null),Object(f["a"])(this,"keyPair",null),Object(f["a"])(this,"eventHandlers",[]),Object(f["a"])(this,"scHname",void 0),Object(f["a"])(this,"waspWebSocketUrl",""),this.serviceClient=t,this.scHname=n}return Object(o["a"])(e,[{key:"callView",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.serviceClient.waspClient.callView(this.serviceClient.configuration.chainId,this.scHname.toString(16),t,n.encodeCall(),r);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"postRequest",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t,n,r,a,i){var u,o,c,s,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(u=this.serviceClient.configuration.chainId,i){e.next=6;break}return e.next=4,this.serviceClient.waspClient.postOffLedgerRequest(u,this.scHname,t,n,r,a);case 4:return o=e.sent,e.abrupt("return",o);case 6:return c={contract:this.scHname,entrypoint:t},s=r.get(H.IOTA_COLOR),e.next=10,this.serviceClient.goShimmerClient.postOnLedgerRequest(u,c,s,a);case 10:if(l=e.sent,l){e.next=13;break}throw new Error("No transaction id");case 13:return e.abrupt("return",l);case 14:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a,i){return e.apply(this,arguments)}return t}()},{key:"register",value:function(e){0===this.eventHandlers.length&&this.configureWebSocketsEventHandlers();for(var t=0;t<this.eventHandlers.length;t++)if(this.eventHandlers[t]===e)return;this.eventHandlers.push(e)}},{key:"unregister",value:function(e){var t;this.eventHandlers=this.eventHandlers.filter((function(t){return t!==e})),0===this.eventHandlers.length&&(null===(t=this.webSocket)||void 0===t||t.close())}},{key:"serviceContractName",value:function(e){this.scHname=S.from(j["Buffer"].from(e)).readUInt32LE(0)}},{key:"waitRequest",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.serviceClient.waspClient.waitRequest(this.serviceClient.configuration.chainId,t);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"configureWebSocketsEventHandlers",value:function(){this.serviceClient.configuration.waspWebSocketUrl.startsWith("wss://")||this.serviceClient.configuration.waspWebSocketUrl.startsWith("ws://")?this.waspWebSocketUrl=this.serviceClient.configuration.waspWebSocketUrl:this.waspWebSocketUrl="ws://"+this.serviceClient.configuration.waspWebSocketUrl,this.waspWebSocketUrl=this.waspWebSocketUrl.replace("%chainId",this.serviceClient.configuration.chainId),this.connectWebSocket()}},{key:"connectWebSocket",value:function(){var e=this;this.webSocket=new WebSocket(this.waspWebSocketUrl),this.webSocket.addEventListener("open",(function(){return e.handleOpenWebSocket()})),this.webSocket.addEventListener("close",(function(){return e.handleCloseWebSocket()})),this.webSocket.addEventListener("error",(function(t){return e.handleErrorWebSocket(t)})),this.webSocket.addEventListener("message",(function(t){return e.handleIncomingMessage(t)}))}},{key:"handleOpenWebSocket",value:function(){console.log("Connected to Websocket => ".concat(this.waspWebSocketUrl))}},{key:"handleCloseWebSocket",value:function(){console.log("Disconnected from Websocket => ".concat(this.waspWebSocketUrl))}},{key:"handleErrorWebSocket",value:function(e){console.error("Web socket error  => ".concat(this.waspWebSocketUrl," => ").concat(e))}},{key:"handleIncomingMessage",value:function(e){var t=e.data.toString().split(" ");if(4==t.length&&"vmmsg"==t[0])for(var n=t[3].split("|"),r=n[0],a=n.slice(1),i=0;i<this.eventHandlers.length;i++)this.eventHandlers[i].callHandler(r,a)}}]),e}(),K=Object(o["a"])((function e(t){var n=this;if(Object(u["a"])(this,e),Object(f["a"])(this,"seed",null),Object(f["a"])(this,"waspWebSocketUrl",""),Object(f["a"])(this,"waspApiUrl",""),Object(f["a"])(this,"goShimmerApiUrl",""),Object(f["a"])(this,"chainId",""),Object(f["a"])(this,"toString",(function(){return"Configuration : { seed: ".concat(n.seed,", waspWebSocketUrl : ").concat(n.waspWebSocketUrl,", waspApiUrl : ").concat(n.waspApiUrl,", goShimmerApiUrl : ").concat(n.goShimmerApiUrl,", chainId : ").concat(n.chainId,"}")})),!t)throw new Error("Configuration not defined");this.seed=t.seed,this.waspWebSocketUrl=t.waspWebSocketUrl,this.waspApiUrl=t.waspApiUrl,this.goShimmerApiUrl=t.goShimmerApiUrl})),F="a",q="m",z="c",G="n",V=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;Object(u["a"])(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(f["a"])(Object(c["a"])(e),"args",new L),e}return Object(o["a"])(n,[{key:"agentID",value:function(e){this.args.set(F,this.args.fromAgentID(e))}},{key:"post",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(O["a"])(Object(m["a"])(n.prototype),"post",this).call(this,3184070701,this.args);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(N),J=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;Object(u["a"])(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(f["a"])(Object(c["a"])(e),"args",new L),e}return Object(o["a"])(n,[{key:"withdrawAmount",value:function(e){this.args.set(q,this.args.fromInt64(e))}},{key:"withdrawColor",value:function(e){this.args.set(z,this.args.fromColor(e))}},{key:"post",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(O["a"])(Object(m["a"])(n.prototype),"post",this).call(this,2067853245,this.args);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(N),$=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(u["a"])(this,n),t.apply(this,arguments)}return Object(o["a"])(n,[{key:"post",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(O["a"])(Object(m["a"])(n.prototype),"post",this).call(this,2647396161,null);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(N),Y=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(u["a"])(this,n),t.apply(this,arguments)}return Object(o["a"])(n,[{key:"call",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new Z,e.next=3,this.callView("accounts",null,t);case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(_),Z=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(u["a"])(this,n),t.apply(this,arguments)}return Object(o["a"])(n,[{key:"agents",value:function(){var e=this,t=new Map;return this.forEach((function(n,r){t.set(e.toAgentID(n),e.toBytes(r))})),t}}]),n}(M),X=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;Object(u["a"])(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(f["a"])(Object(c["a"])(e),"args",new L),e}return Object(o["a"])(n,[{key:"agentID",value:function(e){this.args.set(F,this.args.fromAgentID(e))}},{key:"call",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.args.mandatory(F),t=new Q,e.next=4,this.callView("balance",this.args,t);case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(_),Q=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(u["a"])(this,n),t.apply(this,arguments)}return Object(o["a"])(n,[{key:"balances",value:function(){var e=this,t=new Map;return this.forEach((function(n,r){t.set(e.toColor(n),e.toInt64(r))})),t}}]),n}(M),ee=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;Object(u["a"])(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(f["a"])(Object(c["a"])(e),"args",new L),e}return Object(o["a"])(n,[{key:"agentID",value:function(e){this.args.set(F,this.args.fromAgentID(e))}},{key:"call",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.args.mandatory(F),t=new te,e.next=4,this.callView("getAccountNonce",this.args,t);case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(_),te=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(u["a"])(this,n),t.apply(this,arguments)}return Object(o["a"])(n,[{key:"accountNonce",value:function(){return this.toInt64(this.get(G))}}]),n}(M),ne=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(u["a"])(this,n),t.apply(this,arguments)}return Object(o["a"])(n,[{key:"call",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new re,e.next=3,this.callView("totalAssets",null,t);case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(_),re=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(u["a"])(this,n),t.apply(this,arguments)}return Object(o["a"])(n,[{key:"balances",value:function(){var e=this,t=new Map;return this.forEach((function(n,r){t.set(e.toColor(n),e.toInt64(r))})),t}}]),n}(M),ae=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(e){return Object(u["a"])(this,n),t.call(this,e,1011572226)}return Object(o["a"])(n,[{key:"deposit",value:function(){return new V(this)}},{key:"harvest",value:function(){return new J(this)}},{key:"withdraw",value:function(){return new $(this)}},{key:"accounts",value:function(){return new Y(this)}},{key:"balance",value:function(){return new X(this)}},{key:"getAccountNonce",value:function(){return new ee(this)}},{key:"totalAssets",value:function(){return new ne(this)}}]),n}(W),ie=function(){function e(t){Object(u["a"])(this,e),Object(f["a"])(this,"waspClient",void 0),Object(f["a"])(this,"goShimmerClient",void 0),Object(f["a"])(this,"configuration",void 0),this.configuration=t;var n=new ae(this);this.waspClient=new Re(t.waspApiUrl,n),this.goShimmerClient=new He(t,n)}return Object(o["a"])(e,null,[{key:"default",value:function(){var t={seed:null,waspWebSocketUrl:"ws://127.0.0.1:9090",waspApiUrl:"127.0.0.1:9090",goShimmerApiUrl:""};return new e(new K(t))}}]),e}(),ue=function(){function e(){Object(u["a"])(this,e),Object(f["a"])(this,"xfer",new Map)}return Object(o["a"])(e,[{key:"set",value:function(e,t){e==H.IOTA_COLOR&&(e=H.IOTA_COLOR_STRING),this.xfer.set(e,t)}},{key:"get",value:function(e){var t;e==H.IOTA_COLOR&&(e=H.IOTA_COLOR_STRING);var n=null!==(t=this.xfer.get(e))&&void 0!==t?t:0n;return n}},{key:"encode",value:function(){var e,t=new Array,n=Object(w["a"])(this.xfer);try{for(n.s();!(e=n.n()).done;){var r=Object(g["a"])(e.value,2),a=r[0],i=r[1];i!=BigInt(0)&&t.push(a)}}catch(p){n.e(p)}finally{n.f()}t.sort((function(e,t){return e.localeCompare(t)}));var u=j["Buffer"].alloc(4);u.writeUInt32LE(t.length,0);for(var o=0,c=t;o<c.length;o++){var s=c[o],l=this.xfer.get(s);if(!l)throw new Error("Transfer.encode: missing amount?");var f=k.decode(s),h=j["Buffer"].alloc(8);h.writeBigUInt64LE(l,0),u=j["Buffer"].concat([u,f,h])}return u}}],[{key:"iotas",value:function(t){return e.tokens(H.IOTA_COLOR,t)}},{key:"tokens",value:function(t,n){var r=new e;return r.set(t,n),r}}]),e}(),oe=(n("5cc6"),1),ce=2,se=3,le=4,fe=5,he=6,pe=7,be=8,ve=9,de=10,ye=11,ge=12,Oe=14,me=15,we=new Uint8Array([0,33,37,1,0,33,32,32,4,1,2,4,8,0,34,0]);function je(e){throw new Error(e)}n("b65f"),n("e9c4");var ke={"Content-Type":"application/json"};function Be(e,t,n,r){return Ie.apply(this,arguments)}function Ie(){return Ie=Object(d["a"])(regeneratorRuntime.mark((function e(t,n,r,a){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,xe(t,n,r,a);case 2:return i=e.sent,e.abrupt("return",i.body);case 4:case"end":return e.stop()}}),e)}))),Ie.apply(this,arguments)}function xe(e,t,n,r){return Se.apply(this,arguments)}function Se(){return Se=Object(d["a"])(regeneratorRuntime.mark((function e(t,n,r,a){var i,u,o,c,s,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r.startsWith("/")||(r="/"+r),u="".concat(t,"/").concat(r),e.next=5,fetch(u,{method:n,headers:ke,body:JSON.stringify(a)});case 5:if(i=e.sent,i){e.next=8;break}throw new Error("No data was returned from the API");case 8:return e.prev=8,e.next=11,i.text().then((function(e){return e?JSON.parse(e):{}}));case 11:return o=e.sent,e.abrupt("return",{body:o,response:i});case 15:if(e.prev=15,e.t0=e["catch"](8),c=e.t0,!i.ok){e.next=22;break}throw new Error(c.message);case 22:return e.next=24,i.text();case 24:throw s=e.sent,new Error(c.message+"   ---   "+s);case 26:e.next=32;break;case 28:throw e.prev=28,e.t1=e["catch"](0),l=e.t1,new Error("sendRequest: "+l.message);case 32:case"end":return e.stop()}}),e,null,[[0,28],[8,15]])}))),Se.apply(this,arguments)}var Ee=Object(o["a"])((function e(t,n){Object(u["a"])(this,e),Object(f["a"])(this,"Key",void 0),Object(f["a"])(this,"Value",void 0),this.Key=t,this.Value=n})),Ce=Object(o["a"])((function e(){Object(u["a"])(this,e),Object(f["a"])(this,"Items",new Array)})),Re=function(){function e(t,n){Object(u["a"])(this,e),Object(f["a"])(this,"waspAPI",void 0),Object(f["a"])(this,"coreAccountsService",void 0),t.startsWith("https://")||t.startsWith("http://")?this.waspAPI=t:this.waspAPI="http://"+t,this.coreAccountsService=n}return Object(o["a"])(e,[{key:"callView",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t,n,r,a,i){var u,o,c,s,l,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,xe(this.waspAPI,"post","/chain/".concat(t,"/contract/").concat(n,"/callview/").concat(r),a);case 2:if(u=e.sent,null!==(null===u||void 0===u?void 0:u.body)&&u.body.Items){o=Object(w["a"])(u.body.Items);try{for(o.s();!(c=o.n()).done;)s=c.value,l=j["Buffer"].from(s.Key,"base64"),f=j["Buffer"].from(s.Value,"base64"),i.set(l,f)}catch(h){o.e(h)}finally{o.f()}}case 4:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a,i){return e.apply(this,arguments)}return t}()},{key:"postRequest",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={Request:n.toString("base64")},e.next=3,xe(this.waspAPI,"post","/request/".concat(t),r);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"waitRequest",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,xe(this.waspAPI,"get","/chain/".concat(t,"/request/").concat(n,"/wait"));case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"postOffLedgerRequest",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t,n,r,a,i,u){var o,c,s,l,f,h,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=k.decode(t),c=j["Buffer"].alloc(8),c.writeUInt32LE(n,0),c.writeUInt32LE(r,4),s=j["Buffer"].alloc(8),s.writeBigUInt64LE(BigInt(Math.trunc(performance.now())),0),o=j["Buffer"].concat([o,c,a.encode(),u.publicKey,s,i.encode()]),l=j["Buffer"].alloc(1),f=1,l.writeUInt8(f,0),l=j["Buffer"].concat([l,o,U.privateSign(u,o)]),h=S.from(l),p=j["Buffer"].concat([h,j["Buffer"].alloc(2)]),e.next=15,this.postRequest(t,l);case 15:return e.abrupt("return",k.encode(p));case 16:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a,i,u){return e.apply(this,arguments)}return t}()},{key:"getIOTABalanceInChain",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.coreAccountsService.balance(),n.agentID(t),e.next=4,n.call();case 4:return r=e.sent,a=r.balances(),i=a.has(H.IOTA_COLOR_STRING)?a.get(H.IOTA_COLOR_STRING):a.has(H.IOTA_COLOR)?a.get(H.IOTA_COLOR):0n,e.abrupt("return",null!==i&&void 0!==i?i:0n);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),Ae=(n("7db0"),n("caad"),function(){function e(){Object(u["a"])(this,e)}return Object(o["a"])(e,null,[{key:"ToBuffer",value:function(e){var t=[],n=j["Buffer"].alloc(4);n.writeUInt32LE(109,0),t.push(n);var r=j["Buffer"].alloc(4);r.writeUInt32LE(2,0),t.push(r);var a=k.decode(e.address);t.push(a);var i=k.decode(e.accessManaPledgeID);t.push(i);var u=k.decode(e.consensusManaPledgeID);t.push(u);var o=j["Buffer"].concat(t);return o}}]),e}()),Ue=n("11c1");function Te(){return new Worker(n.p+"js/pow.worker.67726220.worker.js")}var Le,Ne=function(){function e(){Object(u["a"])(this,e),Object(f["a"])(this,"powWorker",new Te)}return Object(o["a"])(e,[{key:"requestProofOfWork",value:function(e,t){var n=this;return new Promise((function(r,a){if(null==n.powWorker)throw new Error("powWorker not defined");var i=Object(Ue["v4"])(),u=function e(t){var u=t.data;"pow_response"==u.type&&u.uuid==i&&(n.powWorker.removeEventListener("message",e),u.error?a(u.error):r(u.data))};n.powWorker.addEventListener("message",u);var o={type:"pow_request",data:t,difficulty:e,uuid:i};n.powWorker.postMessage(o)}))}}]),e}(),_e=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j["Buffer"].alloc(0);Object(u["a"])(this,e),Object(f["a"])(this,"_buffer",void 0),Object(f["a"])(this,"_traverse",void 0),this._buffer=t,this._traverse=0}return Object(o["a"])(e,[{key:"buffer",get:function(){return this._buffer}},{key:"readIntBE",value:function(e){var t=this._buffer.readIntBE(this._traverse,e);return this._traverse+=e,t}},{key:"readUInt32LE",value:function(){var e=this._buffer.readUInt32LE(this._traverse);return this._traverse+=4,e}},{key:"readUInt64LE",value:function(){var e=this._buffer.readBigUInt64LE(this._traverse);return this._traverse+=8,e}},{key:"readUInt16LE",value:function(){var e=this._buffer.readUInt16LE(this._traverse);return this._traverse+=2,e}},{key:"readBytes",value:function(e){var t=this._buffer.subarray(this._traverse,this._traverse+e);return this._traverse+=e,t}},{key:"writeIntBE",value:function(e,t){var n=j["Buffer"].alloc(t);n.writeIntBE(e,0,t),this._buffer=j["Buffer"].concat([this._buffer,n])}},{key:"writeInt8",value:function(e){var t=j["Buffer"].alloc(1);t.writeInt8(e,0),this._buffer=j["Buffer"].concat([this._buffer,t])}},{key:"writeUInt32LE",value:function(e){var t=j["Buffer"].alloc(4);t.writeUInt32LE(e,0),this._buffer=j["Buffer"].concat([this._buffer,t])}},{key:"writeUInt64LE",value:function(e){var t=j["Buffer"].alloc(8);t.writeBigUInt64LE(e,0),this._buffer=j["Buffer"].concat([this._buffer,t])}},{key:"writeUInt16LE",value:function(e){var t=j["Buffer"].alloc(2);t.writeUInt16LE(e,0),this._buffer=j["Buffer"].concat([this._buffer,t])}},{key:"writeBytes",value:function(e){this._buffer=j["Buffer"].concat([this._buffer,e])}}]),e}(),Pe=function(){function e(){Object(u["a"])(this,e)}return Object(o["a"])(e,null,[{key:"ToBuffer",value:function(e){var t,n=new _e(j["Buffer"].alloc(0));if(n.writeUInt32LE(0),n.writeUInt32LE(e.contract||0),n.writeUInt32LE(e.entrypoint||0),n.writeBytes(j["Buffer"].alloc(1,0)),n.writeUInt32LE((null===(t=e.arguments)||void 0===t?void 0:t.length)||0),e.arguments){e.arguments.sort((function(e,t){return e.key.localeCompare(t.key)}));var r,a=Object(w["a"])(e.arguments);try{for(a.s();!(r=a.n()).done;){var i=r.value,u=j["Buffer"].from(i.key);n.writeUInt16LE(u.length),n.writeBytes(u);var o=j["Buffer"].alloc(8);o.writeInt32LE(i.value,0),n.writeUInt32LE(o.length),n.writeBytes(o)}}catch(c){a.e(c)}finally{a.f()}}return n.buffer}}]),e}(),De=function(){function e(){Object(u["a"])(this,e)}return Object(o["a"])(e,null,[{key:"sign",value:function(e,t){return U.privateSign(e,t)}},{key:"essence",value:function(e){var t=new _e;t.writeInt8(e.version),t.writeUInt64LE(e.timestamp),t.writeBytes(k.decode(e.aManaPledge)),t.writeBytes(k.decode(e.cManaPledge)),t.writeUInt16LE(e.inputs.length);var n,r=Object(w["a"])(e.inputs);try{for(r.s();!(n=r.n()).done;){var a=n.value;t.writeInt8(0);var i=k.decode(a);t.writeBytes(i)}}catch(s){r.e(s)}finally{r.f()}t.writeUInt16LE(Object.keys(e.outputs).length);var u=[],o=function(t){var n=new _e;n.writeInt8(3),n.writeUInt32LE(e.outputs[t].length);var r,a=[],i=Object(w["a"])(e.outputs[t]);try{for(i.s();!(r=i.n()).done;){var o=r.value,c=j["Buffer"].alloc(8);c.writeBigUInt64LE(o.value,0),a.push(j["Buffer"].concat([H.IOTA_COLOR_BYTES,c]))}}catch(s){i.e(s)}finally{i.f()}a.sort((function(e,t){return e.compare(t)})),a.forEach((function(e){return n.writeBytes(e)}));var l=k.decode(t);n.writeBytes(l),t==e.chainId?(n.writeInt8(4),n.writeUInt16LE(e.payload.length),n.writeBytes(e.payload)):n.writeInt8(0),u.push(n)};for(var c in e.outputs)o(c);return u.sort((function(e,t){return e.buffer.compare(t.buffer)})),u.forEach((function(e){return t.writeBytes(e.buffer)})),t.writeUInt32LE(0),t.buffer}},{key:"bytes",value:function(t){var n=new _e;n.writeUInt32LE(1337);var r=e.essence(t);for(var a in n.writeBytes(r),n.writeUInt16LE(t.unlockBlocks.length),t.unlockBlocks){var i=t.unlockBlocks[a].type;n.writeInt8(i),0!==i?n.writeUInt16LE(t.unlockBlocks[a].referenceIndex):(n.writeInt8(0),n.writeBytes(t.unlockBlocks[a].publicKey),n.writeBytes(t.unlockBlocks[a].signature))}var u=new _e;return u.writeUInt32LE(n.buffer.length),u.writeBytes(n.buffer),u.buffer}}]),e}(),Me=function(){function e(t){Object(u["a"])(this,e),Object(f["a"])(this,"goShimmerClient",void 0),this.goShimmerClient=t}return Object(o["a"])(e,[{key:"fakeBigBalance",value:function(e){var t={};for(var n in e)t[n]=BigInt(e[n]);return t}},{key:"getUnspentOutputs",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.goShimmerClient.unspentOutputs({addresses:[t]});case 2:return n=e.sent,r=n.unspentOutputs.filter((function(e){return e.outputs.length>0})),a=r.map((function(e){return{address:e.address.base58,outputs:e.outputs.map((function(e){return{id:e.output.outputID.base58,balances:i.fakeBigBalance(e.output.output.balances),inclusionState:e.inclusionState}}))}})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"determineOutputsToConsume",value:function(e,t){var n,r={},a=t,i=Object(w["a"])(e);try{for(i.s();!(n=i.n()).done;){var u,o=n.value,c=!1,s=Object(w["a"])(o.outputs);try{for(s.s();!(u=s.n()).done;){var l=u.value,f=!1;if(l.balances[H.IOTA_COLOR_STRING]){var h=l.balances[H.IOTA_COLOR_STRING];a>0n&&(a>h?a-=h:a=0n,f=!0),f&&(r[o.address]={},r[o.address][l.id]=l,c=!0)}}}catch(d){s.e(d)}finally{s.f()}if(c){var p,b=Object(w["a"])(o.outputs);try{for(b.s();!(p=b.n()).done;){var v=p.value;r[o.address][v.id]=v}}catch(d){b.e(d)}finally{b.f()}}}}catch(d){i.e(d)}finally{i.f()}return r}},{key:"buildOutputs",value:function(e,t,n,r){var a,i={};if(i[t]||(i[t]={}),i[t][H.IOTA_COLOR_STRING]||(i[t][H.IOTA_COLOR_STRING]=0n),i[t][H.IOTA_COLOR_STRING]+=n,r[H.IOTA_COLOR_STRING]=BigInt(null!==(a=r[H.IOTA_COLOR_STRING])&&void 0!==a?a:0n)-n,0n===r[H.IOTA_COLOR_STRING]&&delete r[H.IOTA_COLOR_STRING],Object.keys(r).length>0){if(!e)throw new Error("No remainder address available");for(var u in i[e]||(i[e]={}),r)i[e][u]||(i[e][u]=0n),i[e][u]+=r[u]}var o={};for(var c in i)for(var s in o[c]=[],i[c])o[c].push({color:s,value:i[c][s]});return o}},{key:"buildInputs",value:function(e){var t=[],n={};for(var r in e)for(var a in e[r])for(var i in t.push(a),e[r][a].balances){var u=e[r][a].balances[i];n[i]?n[i]+=u:n[i]=u}return t.sort((function(e,t){return k.decode(e).compare(k.decode(t))})),{inputs:t,consumedFunds:n}}},{key:"unlockBlocks",value:function(e,t,n,r,a){var i=[],u=De.essence(e),o={};for(var c in r)for(var s in r[c])o[s]=c;var l={};for(var f in a){var h=n==o[a[f]];if(h){if(void 0!==l[n]){i.push({type:1,referenceIndex:l[n],publicKey:j["Buffer"].alloc(0),signature:j["Buffer"].alloc(0)});continue}var p={type:0,referenceIndex:0,publicKey:t.publicKey,signature:De.sign(t,u)};l[n]=i.length,i.push(p)}}return i}}]),e}(),He=function(){function e(t,n){Object(u["a"])(this,e),Object(f["a"])(this,"coreAccountsService",void 0),Object(f["a"])(this,"goShimmerConfiguration",void 0),Object(f["a"])(this,"powManager",new Ne),this.coreAccountsService=n,this.goShimmerConfiguration={APIUrl:t.goShimmerApiUrl,SeedUnsafe:t.seed}}return Object(o["a"])(e,[{key:"getIOTABalance",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getBalance(t,H.IOTA_COLOR_STRING);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getBalance",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n==H.IOTA_COLOR&&(n=H.IOTA_COLOR_STRING),e.next=3,this.unspentOutputs({addresses:[t]});case 3:if(r=e.sent,a=r.unspentOutputs.find((function(e){return e.address.base58==t})),a){e.next=7;break}throw new Error("current unspent not found");case 7:return i=a.outputs.filter((function(e){return["ExtendedLockedOutputType","SigLockedColoredOutputType"].includes(e.output.type)&&"undefined"!=typeof e.output.output.balances[n]})).map((function(e){return e.output.output.balances})).reduce((function(e,t){return e+BigInt(t[n])}),BigInt(0)),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"unspentOutputs",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Be(this.goShimmerConfiguration.APIUrl,"post","ledgerstate/addresses/unspentOutputs",t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"requestFunds",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getFaucetRequest(t);case 3:return n=e.sent,e.next=6,this.sendFaucetRequest(n.faucetRequest);case 6:return r=e.sent,a=void 0===r.error&&void 0!==r.id,e.abrupt("return",a);case 11:return e.prev=11,e.t0=e["catch"](0),i=e.t0,console.error(i.message),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getFaucetRequest",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i,u,o,c,s,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getAllowedManaPledge();case 2:return i=e.sent,u=null!==(n=i.accessMana)&&void 0!==n&&n.allowed?i.accessMana.allowed[0]:"",o=null!==(r=i.consensusMana)&&void 0!==r&&r.allowed?null===(a=i.consensusMana)||void 0===a?void 0:a.allowed[0]:"",c={accessManaPledgeID:u,consensusManaPledgeID:o,address:t,nonce:-1},s=Ae.ToBuffer(c),e.next=9,this.powManager.requestProofOfWork(12,s);case 9:return c.nonce=e.sent,l={poWBuffer:s,faucetRequest:c},e.abrupt("return",l);case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getAllowedManaPledge",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Be(this.goShimmerConfiguration.APIUrl,"get","mana/allowedManaPledge"));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"sendFaucetRequest",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Be(this.goShimmerConfiguration.APIUrl,"post","faucet",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"postOnLedgerRequest",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i,u,o,c,s,l,f,h,p,b,v,d,y=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=y.length>2&&void 0!==y[2]?y[2]:1n,i=y.length>3?y[3]:void 0,a<=0&&(a=1n),u=new Me(this),o=R(i),e.next=7,u.getUnspentOutputs(o);case 7:return c=e.sent,s=u.determineOutputsToConsume(c,a),l=u.buildInputs(s),f=l.inputs,h=l.consumedFunds,p=u.buildOutputs(o,t,a,h),b={version:0,timestamp:1000000n*BigInt(Date.now()),aManaPledge:k.encode(j["Buffer"].alloc(32)),cManaPledge:k.encode(j["Buffer"].alloc(32)),inputs:f,outputs:p,chainId:t,payload:Pe.ToBuffer(n),unlockBlocks:[]},b.unlockBlocks=u.unlockBlocks(b,i,o,s,f),v=De.bytes(b),e.next=16,this.sendTransaction({txn_bytes:v.toString("base64")});case 16:if(d=e.sent,d&&void 0==d.error){e.next=19;break}throw Error("Transaction error: "+d.error);case 19:return e.abrupt("return",null!==(r=null===d||void 0===d?void 0:d.transaction_id)&&void 0!==r?r:"");case 20:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"sendTransaction",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Be(this.goShimmerConfiguration.APIUrl,"post","ledgerstate/transactions",t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"depositIOTAToAccountInChain",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=this.coreAccountsService.deposit(),a.agentID(n),a.onLedgerRequest(!0),a.transfer(ue.iotas(r)),a.sign(t),e.next=7,a.post();case 7:return i=e.sent,u=i.length>0,e.abrupt("return",u);case 10:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()}]),e}(),We=new Map([["doodle.gameEnded",function(e,t){return e.gameEnded(new Fe(t))}],["doodle.gameStarted",function(e,t){return e.gameStarted(new qe(t))}],["doodle.playerJoinsNextBigBlind",function(e,t){return e.playerJoinsNextBigBlind(new ze(t))}],["doodle.playerJoinsNextHand",function(e,t){return e.playerJoinsNextHand(new Ge(t))}],["doodle.playerLeft",function(e,t){return e.playerLeft(new Ve(t))}],["doodle.playerWinsAllPots",function(e,t){return e.playerWinsAllPots(new Je(t))}]]),Ke=function(){function e(){Object(u["a"])(this,e),Object(f["a"])(this,"gameEnded",(function(){})),Object(f["a"])(this,"gameStarted",(function(){})),Object(f["a"])(this,"playerJoinsNextBigBlind",(function(){})),Object(f["a"])(this,"playerJoinsNextHand",(function(){})),Object(f["a"])(this,"playerLeft",(function(){})),Object(f["a"])(this,"playerWinsAllPots",(function(){}))}return Object(o["a"])(e,[{key:"callHandler",value:function(e,t){var n=We.get(e);n&&n(this,t)}},{key:"onDoodleGameEnded",value:function(e){this.gameEnded=e}},{key:"onDoodleGameStarted",value:function(e){this.gameStarted=e}},{key:"onDoodlePlayerJoinsNextBigBlind",value:function(e){this.playerJoinsNextBigBlind=e}},{key:"onDoodlePlayerJoinsNextHand",value:function(e){this.playerJoinsNextHand=e}},{key:"onDoodlePlayerLeft",value:function(e){this.playerLeft=e}},{key:"onDoodlePlayerWinsAllPots",value:function(e){this.playerWinsAllPots=e}}]),e}(),Fe=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(e){var r;return Object(u["a"])(this,n),r=t.call(this,e),Object(f["a"])(Object(c["a"])(r),"tableNumber",void 0),r.tableNumber=r.nextUint32(),r}return Object(o["a"])(n)}(D),qe=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(e){var r;return Object(u["a"])(this,n),r=t.call(this,e),Object(f["a"])(Object(c["a"])(r),"paidBigBlindTableSeatNumber",void 0),Object(f["a"])(Object(c["a"])(r),"paidSmallBlindTableSeatNumber",void 0),Object(f["a"])(Object(c["a"])(r),"tableNumber",void 0),r.paidBigBlindTableSeatNumber=r.nextUint16(),r.paidSmallBlindTableSeatNumber=r.nextUint16(),r.tableNumber=r.nextUint32(),r}return Object(o["a"])(n)}(D),ze=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(e){var r;return Object(u["a"])(this,n),r=t.call(this,e),Object(f["a"])(Object(c["a"])(r),"playerAgentId",void 0),Object(f["a"])(Object(c["a"])(r),"playersInitialChipCount",void 0),Object(f["a"])(Object(c["a"])(r),"tableNumber",void 0),Object(f["a"])(Object(c["a"])(r),"tableSeatNumber",void 0),r.playerAgentId=r.nextAgentID(),r.playersInitialChipCount=r.nextUint64(),r.tableNumber=r.nextUint32(),r.tableSeatNumber=r.nextUint16(),r}return Object(o["a"])(n)}(D),Ge=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(e){var r;return Object(u["a"])(this,n),r=t.call(this,e),Object(f["a"])(Object(c["a"])(r),"playerAgentId",void 0),Object(f["a"])(Object(c["a"])(r),"playersInitialChipCount",void 0),Object(f["a"])(Object(c["a"])(r),"tableNumber",void 0),Object(f["a"])(Object(c["a"])(r),"tableSeatNumber",void 0),r.playerAgentId=r.nextAgentID(),r.playersInitialChipCount=r.nextUint64(),r.tableNumber=r.nextUint32(),r.tableSeatNumber=r.nextUint16(),r}return Object(o["a"])(n)}(D),Ve=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(e){var r;return Object(u["a"])(this,n),r=t.call(this,e),Object(f["a"])(Object(c["a"])(r),"tableNumber",void 0),Object(f["a"])(Object(c["a"])(r),"tableSeatNumber",void 0),r.tableNumber=r.nextUint32(),r.tableSeatNumber=r.nextUint16(),r}return Object(o["a"])(n)}(D),Je=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(e){var r;return Object(u["a"])(this,n),r=t.call(this,e),Object(f["a"])(Object(c["a"])(r),"tableNumber",void 0),Object(f["a"])(Object(c["a"])(r),"tableSeatNumber",void 0),Object(f["a"])(Object(c["a"])(r),"totalPotSize",void 0),r.tableNumber=r.nextUint32(),r.tableSeatNumber=r.nextUint16(),r.totalPotSize=r.nextUint64(),r}return Object(o["a"])(n)}(D),$e="potNumber",Ye="publicKey",Ze="tableNumber",Xe="tableSeatNumber",Qe="agentId",et="bigBlindInSeatNumber",tt="chipCount",nt="handInProgress",rt="isInHand",at="joiningNextBigBlind",it="joiningNextHand",ut="potSize",ot="potsCount",ct="size",st="smallBlindInSeatNumber",lt="tableCount",ft=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(u["a"])(this,n),t.apply(this,arguments)}return Object(o["a"])(n,[{key:"post",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(O["a"])(Object(m["a"])(n.prototype),"post",this).call(this,524604996,null);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(N),ht=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;Object(u["a"])(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(f["a"])(Object(c["a"])(e),"args",new L),e}return Object(o["a"])(n,[{key:"publicKey",value:function(e){this.args.set(Ye,this.args.fromString(e))}},{key:"tableNumber",value:function(e){this.args.set(Ze,this.args.fromUint32(e))}},{key:"tableSeatNumber",value:function(e){this.args.set(Xe,this.args.fromUint16(e))}},{key:"post",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.args.mandatory(Ye),e.next=3,Object(O["a"])(Object(m["a"])(n.prototype),"post",this).call(this,2154443001,this.args);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(N),pt=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;Object(u["a"])(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(f["a"])(Object(c["a"])(e),"args",new L),e}return Object(o["a"])(n,[{key:"publicKey",value:function(e){this.args.set(Ye,this.args.fromString(e))}},{key:"tableNumber",value:function(e){this.args.set(Ze,this.args.fromUint32(e))}},{key:"tableSeatNumber",value:function(e){this.args.set(Xe,this.args.fromUint16(e))}},{key:"post",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.args.mandatory(Ye),e.next=3,Object(O["a"])(Object(m["a"])(n.prototype),"post",this).call(this,467625064,this.args);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(N),bt=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;Object(u["a"])(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(f["a"])(Object(c["a"])(e),"args",new L),e}return Object(o["a"])(n,[{key:"tableNumber",value:function(e){this.args.set(Ze,this.args.fromUint32(e))}},{key:"post",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.args.mandatory(Ze),e.next=3,Object(O["a"])(Object(m["a"])(n.prototype),"post",this).call(this,4127729927,this.args);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(N),vt=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;Object(u["a"])(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(f["a"])(Object(c["a"])(e),"args",new L),e}return Object(o["a"])(n,[{key:"potNumber",value:function(e){this.args.set($e,this.args.fromUint16(e))}},{key:"tableNumber",value:function(e){this.args.set(Ze,this.args.fromUint32(e))}},{key:"call",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.args.mandatory($e),this.args.mandatory(Ze),t=new dt,e.next=5,this.callView("getPotInfo",this.args,t);case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(_),dt=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(u["a"])(this,n),t.apply(this,arguments)}return Object(o["a"])(n,[{key:"potSize",value:function(){return this.toUint64(this.get(ut))}}]),n}(M),yt=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(u["a"])(this,n),t.apply(this,arguments)}return Object(o["a"])(n,[{key:"call",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new gt,e.next=3,this.callView("getTableCount",null,t);case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(_),gt=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(u["a"])(this,n),t.apply(this,arguments)}return Object(o["a"])(n,[{key:"tableCount",value:function(){return this.toUint32(this.get(lt))}}]),n}(M),Ot=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;Object(u["a"])(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(f["a"])(Object(c["a"])(e),"args",new L),e}return Object(o["a"])(n,[{key:"tableNumber",value:function(e){this.args.set(Ze,this.args.fromUint32(e))}},{key:"call",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.args.mandatory(Ze),t=new mt,e.next=4,this.callView("getTableInfo",this.args,t);case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(_),mt=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(u["a"])(this,n),t.apply(this,arguments)}return Object(o["a"])(n,[{key:"bigBlindInSeatNumber",value:function(){return this.toUint16(this.get(et))}},{key:"handInProgress",value:function(){return this.toBool(this.get(nt))}},{key:"potsCount",value:function(){return this.toUint16(this.get(ot))}},{key:"size",value:function(){return this.toUint16(this.get(ct))}},{key:"smallBlindInSeatNumber",value:function(){return this.toUint16(this.get(st))}}]),n}(M),wt=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;Object(u["a"])(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(f["a"])(Object(c["a"])(e),"args",new L),e}return Object(o["a"])(n,[{key:"tableNumber",value:function(e){this.args.set(Ze,this.args.fromUint32(e))}},{key:"tableSeatNumber",value:function(e){this.args.set(Xe,this.args.fromUint16(e))}},{key:"call",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.args.mandatory(Ze),this.args.mandatory(Xe),t=new jt,e.next=5,this.callView("getTableSeat",this.args,t);case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(_),jt=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(u["a"])(this,n),t.apply(this,arguments)}return Object(o["a"])(n,[{key:"agentId",value:function(){return this.toAgentID(this.get(Qe))}},{key:"chipCount",value:function(){return this.toUint64(this.get(tt))}},{key:"isInHand",value:function(){return this.toBool(this.get(rt))}},{key:"joiningNextBigBlind",value:function(){return this.toBool(this.get(at))}},{key:"joiningNextHand",value:function(){return this.toBool(this.get(it))}}]),n}(M),kt=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(e){return Object(u["a"])(this,n),t.call(this,e,3020555386)}return Object(o["a"])(n,[{key:"newEventHandler",value:function(){return new Ke}},{key:"init",value:function(){return new ft(this)}},{key:"joinNextBigBlind",value:function(){return new ht(this)}},{key:"joinNextHand",value:function(){return new pt(this)}},{key:"leaveTable",value:function(){return new bt(this)}},{key:"getPotInfo",value:function(){return new vt(this)}},{key:"getTableCount",value:function(){return new yt(this)}},{key:"getTableInfo",value:function(){return new Ot(this)}},{key:"getTableSeat",value:function(){return new wt(this)}}]),n}(W);function Bt(e,t){var n="| ".concat(e.toString()," | - ").concat(t);e==Le.Error?console.error(n):console.log(n)}function It(e){return xt.apply(this,arguments)}function xt(){return xt=Object(d["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.waspApiUrl+"/adm/chainrecords");case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r[0].ChainID);case 7:case"end":return e.stop()}}),e)}))),xt.apply(this,arguments)}function St(){var e=E.generate(),t=0,n=E.generateKeyPair(e,t),r=n.secretKey,a=n.publicKey,i=E.generateAddress(e,t),u=k.encode(r),o=k.encode(a);return[u,o,i]}function Et(e,t){var n={secretKey:k.decode(e),publicKey:k.decode(t)};return n}(function(e){e["Site"]="Site",e["Funds"]="Funds",e["SmartContract"]="Smart Contract",e["Error"]="Error"})(Le||(Le={}));var Ct=n("9c2b"),Rt=n("2909"),At="1111111111111111111111111111111111111";function Ut(e){return new Promise((function(t){return setTimeout(t,e)}))}function Tt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Object(Rt["a"])(Array(t-e).keys()).filter((function(e){return!(e%Math.round(n))})).map((function(t){return e+t}))}var Lt=function(){function e(){Object(u["a"])(this,e),Object(f["a"])(this,"doodleService",void 0),Object(f["a"])(this,"serviceClient",void 0),Object(f["a"])(this,"userWalletPrivKey",void 0),Object(f["a"])(this,"userWalletPubKey",void 0),Object(f["a"])(this,"userWalletAddress",void 0),Object(f["a"])(this,"initialized",!1)}return Object(o["a"])(e,[{key:"initialize",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.initialized){e.next=2;break}return e.abrupt("return",this.initialized);case 2:return Bt(Le.Site,"Initializing"),a=new K(Ct),Bt(Le.Site,"Configuration loaded: "+a),this.generateKeyPairAndAddress(t,n,r),Bt(Le.Site,"Using private key '".concat(this.userWalletPrivKey,"' public key '").concat(this.userWalletPubKey,"' address '").concat(this.userWalletAddress,"'")),e.next=9,It(a);case 9:return a.chainId=e.sent,Bt(Le.Site,"Using chain "+a.chainId),this.serviceClient=new ie(a),this.doodleService=new kt(this.serviceClient),this.doodleService.keyPair={publicKey:k.decode(this.userWalletPubKey),secretKey:k.decode(this.userWalletPrivKey)},e.next=16,this.doodleService.getTableCount().call();case 16:return i=e.sent.tableCount(),Bt(Le.SmartContract,"table count: "+i),this.initialized=!0,Bt(Le.Site,"Initialization complete"),e.abrupt("return",!0);case 21:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"registerEvents",value:function(e){this.doodleService.register(e)}},{key:"generateKeyPairAndAddress",value:function(e,t,n){if(""===e||""===n){var r=St(),a=Object(g["a"])(r,3),i=a[0],u=a[1],o=a[2];this.userWalletPrivKey=i,this.userWalletPubKey=u,this.userWalletAddress=o,Bt(Le.Site,"Key pair generated.")}else this.userWalletPrivKey=e,this.userWalletPubKey=t,this.userWalletAddress=n}},{key:"getL1IOTABalance",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.serviceClient.goShimmerClient.getIOTABalance(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"requestL1Funds",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.serviceClient.goShimmerClient.requestFunds(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"depositInL2",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Et(t,n),i=C(a),e.next=4,this.serviceClient.goShimmerClient.depositIOTAToAccountInChain(a,i,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"getL2IOTABalance",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=Et(t,n),a=C(r),e.next=4,this.serviceClient.waspClient.getIOTABalanceInChain(a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getTableInfo",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,Bt(Le.SmartContract,"Getting info for table ".concat(t)),n=this.doodleService.getTableInfo(),n.tableNumber(t),e.next=6,n.call();case 6:return r=e.sent,a={number:t,size:r.size(),smallBlindInSeatNumber:r.smallBlindInSeatNumber(),bigBlindInSeatNumber:r.bigBlindInSeatNumber(),handInProgress:r.handInProgress(),potsCount:r.potsCount()},e.abrupt("return",a);case 11:throw e.prev=11,e.t0=e["catch"](0),i=e.t0,Bt(Le.Error,i.message),e.t0;case 16:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getTableCount",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,Bt(Le.SmartContract,"Getting table count"),t=this.doodleService.getTableCount(),e.next=5,t.call();case 5:return n=e.sent,r=n.tableCount(),e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e["catch"](0),a=e.t0,Bt(Le.Error,a.message),e.t0;case 15:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"getTableSeats",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,r=this.doodleService.getTableSeat(),r.tableNumber(t.number),a=[],n&&0!=n.length){e.next=10;break}return i=Tt(1,t.size),e.next=8,Promise.all(i.map(function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){var n,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.tableSeatNumber(t),e.next=3,r.call();case 3:n=e.sent,i=n.agentId(),u={number:t,agentID:i,chipCount:n.chipCount(),isInHand:n.isInHand(),joiningNextHand:n.joiningNextHand(),joiningNextBigBlind:n.joiningNextBigBlind()},a.push(u);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:e.next=12;break;case 10:return e.next=12,Promise.all(n.map(function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){var n,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.tableSeatNumber(t),e.next=3,r.call();case 3:n=e.sent,i=n.agentId(),u={number:t,agentID:i,chipCount:n.chipCount(),isInHand:n.isInHand(),joiningNextHand:n.joiningNextHand(),joiningNextBigBlind:n.joiningNextBigBlind()},a.push(u);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",a);case 15:throw e.prev=15,e.t0=e["catch"](0),u=e.t0,Bt(Le.Error,u.message),e.t0;case 20:case"end":return e.stop()}}),e,this,[[0,15]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"joinNextHand",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t,n,r,a){var i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(a<=0)){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,Bt(Le.SmartContract,"Executing JoinNextHandFunc for table ".concat(n," tableseat ").concat(r," with ").concat(a," IOTA")),i=this.doodleService.joinNextHand(),n>0&&i.tableNumber(n),r>0&&i.tableSeatNumber(r),i.publicKey(t),i.transfer(ue.iotas(a)),i.sign(this.doodleService.keyPair),e.next=12,i.post();case 12:return e.abrupt("return",!0);case 15:return e.prev=15,e.t0=e["catch"](2),u=e.t0,Bt(Le.Error,u.message),e.abrupt("return",!1);case 20:case"end":return e.stop()}}),e,this,[[2,15]])})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"joinNextBigBlind",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t,n,r,a){var i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(a<=0)){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,Bt(Le.SmartContract,"Executing JoinNextBigBlindFunc for table ".concat(n," tableseat ").concat(r," with ").concat(a," IOTA")),i=this.doodleService.joinNextBigBlind(),n>0&&i.tableNumber(n),r>0&&i.tableSeatNumber(r),i.publicKey(t),i.transfer(ue.iotas(a)),i.sign(this.doodleService.keyPair),e.next=12,i.post();case 12:return e.abrupt("return",!0);case 15:return e.prev=15,e.t0=e["catch"](2),u=e.t0,Bt(Le.Error,u.message),e.abrupt("return",!1);case 20:case"end":return e.stop()}}),e,this,[[2,15]])})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"leaveTable",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,Bt(Le.SmartContract,"Leaving table ".concat(t)),n=this.doodleService.leaveTable(),n.tableNumber(t),n.sign(this.doodleService.keyPair),e.next=7,n.post();case 7:return e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e["catch"](0),r=e.t0,Bt(Le.Error,r.message),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),Nt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"table"},[n("div",{staticClass:"card-place"},e._l(e.five_cards,(function(e,t){return n("Card",{key:t,attrs:{card:e}})})),1),n("div",{staticClass:"table-seats"},e._l(e.tableInfo.size,(function(t){return n("TableSeat",{key:t,attrs:{doodle:e.doodle,tableInfo:e.tableInfo,tableSeatNumber:t}})})),1)])},_t=[],Pt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card",class:["figures-"+e.card.Figure,"values-"+e.card.Value]},[n("h1",[e._v(e._s(e.card.Value))]),n("div",{staticClass:"figures",class:e.card.Figure}),n("h1",[e._v(e._s(e.card.Value))])])},Dt=[],Mt=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;Object(u["a"])(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(f["a"])(Object(c["a"])(e),"card",void 0),e}return Object(o["a"])(n)}(p["c"]);Object(h["a"])([Object(p["b"])(Object)],Mt.prototype,"card",void 0),Mt=Object(h["a"])([p["a"]],Mt);var Ht=Mt,Wt=Ht,Kt=(n("ed9e"),n("2877")),Ft=Object(Kt["a"])(Wt,Pt,Dt,!1,null,"9cade49a",null),qt=Ft.exports,zt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.player?n("Player",{staticClass:"player",class:["table-seat-"+e.tableSeatNumber,{playing:e.player_playing===e.tableSeatNumber}],attrs:{doodle:e.doodle,player:e.player}}):e._e()},Gt=[],Vt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"avatar",style:{backgroundColor:e.player.color||"dodgerblue"}}),e.player.bank>0?n("Bank",{attrs:{chipCount:e.player.bank,bankOnTable:e.player.onTable}}):e._e(),e.player.onTable>0?n("Bet",{attrs:{chipCount:e.player.onTable}}):e._e(),n("div",{staticClass:"name"},[e._v(e._s(e.player.name))])],1)},Jt=[],$t=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bank"},[n("div",{staticClass:"bank-value"},[e._v(e._s(e.chipCount))]),n("ChipStack",{attrs:{totalChipCount:e.mockChips}})],1)},Yt=[],Zt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.totalChipCount>0?n("div",{staticClass:"chipStack"},e._l(e.chipDenominations,(function(t){return n("Chip",{key:t,attrs:{denomination:t,chipCount:e.chipCountInDenomination(t)}})})),1):e._e()},Xt=[],Qt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.chipCount>0?n("div",e._l(e.chipCount,(function(t){return n("div",{key:t,class:["chip","denomination-"+e.denomination],style:{top:e.nextChipTopPosition(t)+"px"}})})),0):e._e()},en=[],tn=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;Object(u["a"])(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(f["a"])(Object(c["a"])(e),"denomination",void 0),Object(f["a"])(Object(c["a"])(e),"chipCount",void 0),e}return Object(o["a"])(n,[{key:"nextChipTopPosition",get:function(){return function(e){return 5*e-2}}}]),n}(p["c"]);Object(h["a"])([Object(p["b"])()],tn.prototype,"denomination",void 0),Object(h["a"])([Object(p["b"])()],tn.prototype,"chipCount",void 0),tn=Object(h["a"])([p["a"]],tn);var nn=tn,rn=nn,an=(n("07a2"),Object(Kt["a"])(rn,Qt,en,!1,null,"a00e6c5e",null)),un=an.exports,on=Object(o["a"])((function e(){Object(u["a"])(this,e)}));Object(f["a"])(on,"Denominations",[10,5,1]);var cn=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;Object(u["a"])(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(f["a"])(Object(c["a"])(e),"totalChipCount",void 0),e}return Object(o["a"])(n,[{key:"chipDenominations",get:function(){return on.Denominations}},{key:"totalDenominationChipCount",get:function(){var e=this,t=[],n=0n;return this.chipDenominations.forEach((function(r){if(e.totalChipCount!=n){var a=BigInt(r),i=BigInt(e.totalChipCount)-BigInt(n),u=Math.floor(Number(i/a));if(u>0){var o={Denomination:r,Count:u};t.push(o),n+=BigInt(u)*a}}})),t}},{key:"chipCountInDenomination",get:function(){var e=this;return function(t){var n,r,a=null!==(n=null===(r=e.totalDenominationChipCount.find((function(e){return e.Denomination==t})))||void 0===r?void 0:r.Count)&&void 0!==n?n:0;return a}}}]),n}(p["c"]);Object(h["a"])([Object(p["b"])()],cn.prototype,"totalChipCount",void 0),cn=Object(h["a"])([Object(p["a"])({components:{Chip:un}})],cn);var sn=cn,ln=sn,fn=Object(Kt["a"])(ln,Zt,Xt,!1,null,null,null),hn=fn.exports,pn=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;Object(u["a"])(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(f["a"])(Object(c["a"])(e),"chipCount",void 0),Object(f["a"])(Object(c["a"])(e),"bankOnTable",void 0),e}return Object(o["a"])(n,[{key:"mockChips",get:function(){var e=this;return this.chipCount<=0n?0n:void 0!==on.Denominations.find((function(t){return t==Number(e.chipCount)}))?this.chipCount:this.chipCount<5n?1n:this.chipCount<=9n?6n:this.chipCount<15n?11n:15n==this.chipCount?15n:16n}}]),n}(p["c"]);Object(h["a"])([Object(p["b"])()],pn.prototype,"chipCount",void 0),Object(h["a"])([Object(p["b"])()],pn.prototype,"bankOnTable",void 0),pn=Object(h["a"])([Object(p["a"])({components:{ChipStack:hn}})],pn);var bn=pn,vn=bn,dn=(n("943d"),n("12c7"),Object(Kt["a"])(vn,$t,Yt,!1,null,"0f395f14",null)),yn=dn.exports,gn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bet"},[n("div",{staticClass:"bet-value"},[e._v(e._s(e.chipCount))]),n("ChipStack",{attrs:{totalChipCount:e.chipCount}})],1)},On=[],mn=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;Object(u["a"])(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(f["a"])(Object(c["a"])(e),"chipCount",void 0),e}return Object(o["a"])(n)}(p["c"]);Object(h["a"])([Object(p["b"])()],mn.prototype,"chipCount",void 0),mn=Object(h["a"])([Object(p["a"])({components:{ChipStack:hn}})],mn);var wn=mn,jn=wn,kn=(n("79e7"),n("6f14"),Object(Kt["a"])(jn,gn,On,!1,null,"553b9f2e",null)),Bn=kn.exports,In=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;Object(u["a"])(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(f["a"])(Object(c["a"])(e),"player",void 0),Object(f["a"])(Object(c["a"])(e),"doodle",void 0),Object(f["a"])(Object(c["a"])(e),"eventsHandler",new Ke),e}return Object(o["a"])(n,[{key:"onDoodleChange",value:function(e){e&&(this.setEvents(),this.registerEvents())}},{key:"setEvents",value:function(){var e=this;this.eventsHandler.onDoodlePlayerWinsAllPots((function(t){t.tableNumber==e.player.tableNumber&&t.tableSeatNumber==e.player.tableSeatNumber&&Bt(Le.SmartContract,"Event: PlayerWinsAllPots -> Table ".concat(t.tableNumber," TableSeatNumber ").concat(t.tableSeatNumber," TotalPotSize ").concat(t.totalPotSize))}))}},{key:"registerEvents",value:function(){this.doodle.registerEvents(this.eventsHandler)}}]),n}(p["c"]);Object(h["a"])([Object(p["b"])()],In.prototype,"player",void 0),Object(h["a"])([Object(p["b"])()],In.prototype,"doodle",void 0),Object(h["a"])([Object(p["d"])("doodle.initialized",{immediate:!0})],In.prototype,"onDoodleChange",null),In=Object(h["a"])([Object(p["a"])({components:{Bank:yn,Bet:Bn}})],In);var xn=In,Sn=xn,En=Object(Kt["a"])(Sn,Vt,Jt,!1,null,null,null),Cn=En.exports;function Rn(e){switch(e){case 1:return"dodgerblue";case 2:return"cyan";case 3:return"lightcoral";case 4:return"crimson";case 5:return"#444";case 6:return"forestgreen";case 7:return"goldenrod";case 8:return"gold";case 9:return"#999";default:return""}}var An=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;Object(u["a"])(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(f["a"])(Object(c["a"])(e),"doodle",void 0),Object(f["a"])(Object(c["a"])(e),"tableInfo",void 0),Object(f["a"])(Object(c["a"])(e),"tableSeatNumber",void 0),Object(f["a"])(Object(c["a"])(e),"tableSeat",{number:0,agentID:At,chipCount:0n,isInHand:!1,joiningNextBigBlind:!1,joiningNextHand:!1}),Object(f["a"])(Object(c["a"])(e),"player",null),Object(f["a"])(Object(c["a"])(e),"player_playing",3),Object(f["a"])(Object(c["a"])(e),"eventsHandler",new Ke),e}return Object(o["a"])(n,[{key:"onDoodleChange",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.updateTableSeat();case 4:this.setEvents(),this.registerEvents();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateTableSeat",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.doodle.getTableSeats(this.tableInfo,[this.tableSeatNumber]);case 2:if(t=e.sent,1==t.length){e.next=7;break}throw n="Invalid amount of table seats. Queried table seat ".concat(this.tableSeatNumber," got ").concat(t.length),Bt(Le.SmartContract,n),Error(n);case 7:this.tableSeat=t[0],this.player=this.tableSeat.agentID==At?null:this.toPlayer(this.tableSeat);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"toPlayer",value:function(e){var t={tableNumber:this.tableInfo.number,tableSeatNumber:e.number,name:e.agentID,color:Rn(e.number),bank:e.chipCount,onTable:0n,hasCards:!1};return Bt(Le.SmartContract,"Table seat ".concat(JSON.stringify(this.tableSeat)," -> Player ").concat(JSON.stringify(t))),t}},{key:"setEvents",value:function(){var e=this;this.eventsHandler.onDoodlePlayerJoinsNextHand(function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n.tableNumber==e.tableInfo.number&&n.tableSeatNumber==e.tableSeat.number){t.next=2;break}return t.abrupt("return");case 2:return Bt(Le.SmartContract,"Event: EventPlayerJoinsNextHand -> Table ".concat(n.tableNumber," Seat ").concat(n.tableSeatNumber," Chip count: ").concat(n.playersInitialChipCount)),t.next=5,e.updateTableSeat();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.eventsHandler.onDoodlePlayerJoinsNextBigBlind(function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n.tableNumber==e.tableInfo.number&&n.tableSeatNumber==e.tableSeat.number){t.next=2;break}return t.abrupt("return");case 2:return Bt(Le.SmartContract,"Event: EventPlayerJoinsNextBigBlind -> Table ".concat(n.tableNumber," Seat ").concat(n.tableSeatNumber," Chip count: ").concat(n.playersInitialChipCount)),t.next=5,e.updateTableSeat();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.eventsHandler.onDoodlePlayerLeft(function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n.tableNumber==e.tableInfo.number&&n.tableSeatNumber==e.tableSeat.number){t.next=2;break}return t.abrupt("return");case 2:return Bt(Le.SmartContract,"Event: EventPlayerLeft -> Table ".concat(n.tableNumber," Seat ").concat(n.tableSeatNumber)),t.next=5,e.updateTableSeat();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"registerEvents",value:function(){this.doodle.registerEvents(this.eventsHandler)}}]),n}(p["c"]);Object(h["a"])([Object(p["b"])()],An.prototype,"doodle",void 0),Object(h["a"])([Object(p["b"])()],An.prototype,"tableInfo",void 0),Object(h["a"])([Object(p["b"])()],An.prototype,"tableSeatNumber",void 0),Object(h["a"])([Object(p["d"])("doodle.initialized",{immediate:!0})],An.prototype,"onDoodleChange",null),An=Object(h["a"])([Object(p["a"])({components:{Player:Cn}})],An);var Un=An,Tn=Un,Ln=(n("7a9b"),Object(Kt["a"])(Tn,zt,Gt,!1,null,null,null)),Nn=Ln.exports,_n=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;Object(u["a"])(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(f["a"])(Object(c["a"])(e),"tableNumber",void 0),Object(f["a"])(Object(c["a"])(e),"doodle",void 0),Object(f["a"])(Object(c["a"])(e),"tableInfo",{number:e.tableNumber,size:0,smallBlindInSeatNumber:0,bigBlindInSeatNumber:0,handInProgress:!1,potsCount:0}),Object(f["a"])(Object(c["a"])(e),"player_playing",3),Object(f["a"])(Object(c["a"])(e),"eventsHandler",new Ke),Object(f["a"])(Object(c["a"])(e),"figures",["S","H","C","D"]),Object(f["a"])(Object(c["a"])(e),"values",["A","2","3","4","5","6","7","8","9","10","J","Q","K"]),e}return Object(o["a"])(n,[{key:"onDoodleChange",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.doodle.getTableInfo(this.tableNumber);case 4:this.tableInfo=e.sent,Bt(Le.SmartContract,"Table info: "+JSON.stringify(this.tableInfo)),this.setEvents(),this.registerEvents();case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setEvents",value:function(){var e=this;this.eventsHandler.onDoodleGameStarted((function(t){t.tableNumber==e.tableNumber&&Bt(Le.SmartContract,"Event: EventGameStarted -> Table ".concat(t.tableNumber," paidBigBlindTableSeatNumber ").concat(t.paidBigBlindTableSeatNumber," paidSmallBlindTableSeatNumber ").concat(t.paidSmallBlindTableSeatNumber))})),this.eventsHandler.onDoodleGameEnded((function(t){t.tableNumber==e.tableNumber&&Bt(Le.SmartContract,"Event: EventGameEnded -> Table ".concat(t.tableNumber))}))}},{key:"registerEvents",value:function(){Bt(Le.Site,"Registered events for table ".concat(this.tableNumber)),this.doodle.registerEvents(this.eventsHandler)}},{key:"cards",get:function(){var e,t=[],n=Object(w["a"])(this.figures);try{for(n.s();!(e=n.n()).done;){var r,a=e.value,i=Object(w["a"])(this.values);try{for(i.s();!(r=i.n()).done;){var u=r.value;t.push({Figure:a,Value:u})}}catch(o){i.e(o)}finally{i.f()}}}catch(o){n.e(o)}finally{n.f()}return t}},{key:"five_cards",get:function(){for(var e=this,t=[],n=function(n){var r=!0,a={Figure:"X",Value:"0"};while(r){var i=Math.floor(Math.random()*e.cards.length);a=e.cards[i],r=void 0!==t.find((function(e){return e.Value===a.Value&&e.Figure===a.Figure}))}t.push(a)},r=0;r<5;r++)n(r);return t}}]),n}(p["c"]);Object(h["a"])([Object(p["b"])({default:0})],_n.prototype,"tableNumber",void 0),Object(h["a"])([Object(p["b"])()],_n.prototype,"doodle",void 0),Object(h["a"])([Object(p["d"])("doodle.initialized",{immediate:!0})],_n.prototype,"onDoodleChange",null),_n=Object(h["a"])([Object(p["a"])({components:{Card:qt,TableSeat:Nn}})],_n);var Pn=_n,Dn=Pn,Mn=(n("346a"),Object(Kt["a"])(Dn,Nt,_t,!1,null,"740c3920",null)),Hn=Mn.exports,Wn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"buttonGroup"},[e._t("default")],2)},Kn=[],Fn=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(u["a"])(this,n),t.apply(this,arguments)}return Object(o["a"])(n)}(p["c"]);Fn=Object(h["a"])([p["a"]],Fn);var qn=Fn,zn=qn,Gn=(n("a503"),Object(Kt["a"])(zn,Wn,Kn,!1,null,"60212c6a",null)),Vn=Gn.exports,Jn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"button",class:{"is-pressed":e.isPressed},on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.setPressed.apply(null,arguments)},mouseup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.reset.apply(null,arguments)},mouseleave:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.reset.apply(null,arguments)}}},[n("div",{staticClass:"body"},[n("div",{staticClass:"text"},[e._t("default")],2)])])},$n=[],Yn=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;Object(u["a"])(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(f["a"])(Object(c["a"])(e),"isPressable",void 0),Object(f["a"])(Object(c["a"])(e),"isPressed",!1),e}return Object(o["a"])(n,[{key:"setPressed",value:function(){this.isPressable&&(this.isPressed=!0,this.$emit("button-pressed"))}},{key:"reset",value:function(){this.isPressed=!1}}]),n}(p["c"]);Object(h["a"])([Object(p["b"])({default:!0})],Yn.prototype,"isPressable",void 0),Yn=Object(h["a"])([p["a"]],Yn);var Zn=Yn,Xn=Zn,Qn=(n("e86f"),Object(Kt["a"])(Xn,Jn,$n,!1,null,"3ac0560d",null)),er=Qn.exports,tr=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;Object(u["a"])(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(f["a"])(Object(c["a"])(e),"userData",new rr("","","")),Object(f["a"])(Object(c["a"])(e),"currentTableNumber",0),Object(f["a"])(Object(c["a"])(e),"requestingFunds",!1),Object(f["a"])(Object(c["a"])(e),"doodle",new Lt),e}return Object(o["a"])(n,[{key:"mounted",value:function(){this.doodle=new Lt}},{key:"onDoodleChange",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.initialized){e.next=6;break}return e.next=3,this.loadUserKeyPairAndAddress(t);case 3:return e.next=5,t.getTableCount();case 5:this.currentTableNumber=e.sent;case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"loadUserKeyPairAndAddress",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i,u,o,c,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.initialized){e.next=2;break}return e.abrupt("return");case 2:return n=Object(y["useStorage"])("user-base58-private-key",""),r=Object(y["useStorage"])("user-base58-public-key",""),a=Object(y["useStorage"])("user-address",""),i=n.value,u=r.value,o=a.value,e.next=10,t.initialize(i,u,o);case 10:if(c=e.sent,c){e.next=13;break}throw new Error("Could not initialize doodle client");case 13:return s=""!==i&&""!==u&&""!==o,s||(n.value=t.userWalletPrivKey,r.value=t.userWalletPubKey,a.value=t.userWalletAddress),this.userData=new rr(n.value,r.value,a.value),e.next=18,this.updateL1Balance();case 18:return e.next=20,this.updateL2Balance();case 20:this.logL1Balance(),this.logL2Balance();case 22:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"requestFunds",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.requestingFunds=!0,e.next=3,this.requestL1Funds();case 3:return this.userData.l1Balance=e.sent,this.logL1Balance(),e.next=7,this.depositInL2(1201n);case 7:this.userData.l2Balance=e.sent,this.logL1Balance(),this.logL2Balance(),this.requestingFunds=!1;case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"logL1Balance",value:function(){this.userData&&Bt(Le.Funds,"Funds available in L1: ".concat(this.userData.l1Balance," IOTA"))}},{key:"logL2Balance",value:function(){this.userData&&Bt(Le.Funds,"Funds available in L2: ".concat(this.userData.l2Balance," IOTA"))}},{key:"requestL1Funds",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.doodle.getL1IOTABalance(this.userData.address);case 2:if(t=e.sent,!(t>0)){e.next=5;break}return e.abrupt("return",t);case 5:return Bt(Le.Funds,"Requesting funds"),e.next=8,this.doodle.requestL1Funds(this.userData.address);case 8:if(n=e.sent,r="Could not request dummy IOTA from faucet.",n){e.next=13;break}return Bt(Le.Error,r),e.abrupt("return",0n);case 13:return e.next=15,Ut(3e3);case 15:a=1;case 16:if(!(a<=5)){e.next=27;break}return e.next=19,this.doodle.getL1IOTABalance(this.userData.address);case 19:if(t=e.sent,!(t>0n)){e.next=22;break}return e.abrupt("break",27);case 22:return e.next=24,Ut(3e3);case 24:a++,e.next=16;break;case 27:if(!(t>0n)){e.next=29;break}return e.abrupt("return",t);case 29:return Bt(Le.Error,r),e.abrupt("return",0n);case 31:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"depositInL2",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(this.userData.l1Balance<t)){e.next=4;break}Bt(Le.Error,"L1 balance of ".concat(this.userData.l1Balance," is lower than ").concat(t)),e.next=34;break;case 4:return Bt(Le.Funds,"Depositing ".concat(t," IOTA from L1 to L2. Recipient account: ").concat(this.userData.address)),e.next=7,this.doodle.depositInL2(this.userData.privateKey,this.userData.publicKey,t);case 7:if(n=e.sent,r="Could not deposit to L2.",n){e.next=12;break}return Bt(Le.Error,r),e.abrupt("return",0n);case 12:return a=0n,e.next=15,Ut(2e3);case 15:i=1;case 16:if(!(i<=5)){e.next=28;break}return e.next=19,this.doodle.getL2IOTABalance(this.userData.privateKey,this.userData.publicKey);case 19:if(a=e.sent,!(a>0n)){e.next=22;break}return e.abrupt("break",28);case 22:return Bt(Le.Funds,"Try #".concat(i," -> Retrying...")),e.next=25,Ut(2e3);case 25:i++,e.next=16;break;case 28:if(!(a>0n)){e.next=32;break}return e.next=31,this.updateL1Balance();case 31:return e.abrupt("return",a);case 32:return Bt(Le.Error,r),e.abrupt("return",0n);case 34:return e.next=36,this.doodle.getL2IOTABalance(this.userData.privateKey,this.userData.publicKey);case 36:return u=e.sent,e.abrupt("return",u);case 38:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateL1Balance",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.doodle.getL1IOTABalance(this.userData.address);case 2:this.userData.l1Balance=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateL2Balance",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.doodle.getL2IOTABalance(this.userData.privateKey,this.userData.publicKey);case 2:this.userData.l2Balance=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"joinNextHand",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.doodle.joinNextHand(this.userData.publicKey,this.currentTableNumber,1,400n);case 2:if(t=e.sent,!t){e.next=9;break}return e.next=6,Ut(4e3);case 6:return e.next=8,this.updateL2Balance();case 8:this.logL2Balance();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"joinNextBigBlind",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.doodle.joinNextBigBlind(this.userData.publicKey,this.currentTableNumber,1,400n);case 2:if(t=e.sent,!t){e.next=9;break}return e.next=6,Ut(4e3);case 6:return e.next=8,this.updateL2Balance();case 8:this.logL2Balance();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"leaveTable",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.doodle.leaveTable(this.currentTableNumber);case 2:if(t=e.sent,!t){e.next=9;break}return e.next=6,Ut(4e3);case 6:return e.next=8,this.updateL2Balance();case 8:this.logL2Balance();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(p["c"]);Object(h["a"])([Object(p["d"])("doodle")],tr.prototype,"onDoodleChange",null),tr=Object(h["a"])([Object(p["a"])({components:{Table:Hn,ButtonGroup:Vn,Button:er}})],tr);var nr=tr,rr=Object(o["a"])((function e(t,n,r){Object(u["a"])(this,e),Object(f["a"])(this,"privateKey",void 0),Object(f["a"])(this,"publicKey",void 0),Object(f["a"])(this,"address",void 0),Object(f["a"])(this,"l1Balance",-1n),Object(f["a"])(this,"l2Balance",-1n),Object(f["a"])(this,"chainBalance",0n),this.privateKey=t,this.publicKey=n,this.address=r})),ar=nr,ir=(n("df5e"),Object(Kt["a"])(ar,b,v,!1,null,null,null)),ur=ir.exports,or=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;Object(u["a"])(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(f["a"])(Object(c["a"])(e),"isDevelopment",!1),e}return Object(o["a"])(n,[{key:"mounted",value:function(){this.isDevelopment=!1}}]),n}(p["c"]);or=Object(h["a"])([Object(p["a"])({components:{Game:ur}})],or);var cr=or,sr=cr,lr=(n("7c55"),Object(Kt["a"])(sr,a,i,!1,null,null,null)),fr=lr.exports;function hr(){BigInt.prototype.toJSON=function(){return this.toString()}}r["default"].config.productionTip=!1,r["default"].config.devtools=!1,hr(),new r["default"]({render:function(e){return e(fr)}}).$mount("#app")},d9b50:function(e,t,n){},df5e:function(e,t,n){"use strict";n("d9b50")},e3e2:function(e,t,n){},e86f:function(e,t,n){"use strict";n("ec5c")},ec5c:function(e,t,n){},ed9e:function(e,t,n){"use strict";n("065c")}});
//# sourceMappingURL=app.1682ca05.js.map